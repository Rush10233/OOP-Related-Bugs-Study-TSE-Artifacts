<!DOCTYPE html>
<html><head><meta charset="utf-8"/><title>⚙ D17407 [Sema] PR25755 Handle out of order designated initializers </title><meta content="width=device-width, initial-scale=1, user-scalable=no" name="viewport"/><link color="#3D4B67" href="overrides/favicon/mask-icon.svg" rel="mask-icon"/><link href="overrides/favicon/favicon-76" rel="apple-touch-icon" sizes="76x76"/><link href="overrides/favicon/favicon-120" rel="apple-touch-icon" sizes="120x120"/><link href="overrides/favicon/favicon-152" rel="apple-touch-icon" sizes="152x152"/><link href="overrides/favicon/favicon" id="favicon" rel="icon"/><meta content="no-referrer" name="referrer"/><link href="overrides/css/differential.pkg.css" rel="stylesheet" type="text/css"/><link href="overrides/css/core.pkg.css" rel="stylesheet" type="text/css"/><script src="overrides/js/init.js" type="text/javascript"></script></head><body class="device-desktop platform-linux phui-theme-blindigo" id=""><div class="main-page-frame" data-autoid="autoid_14" id="main-page-frame"><div class="phabricator-standard-page" id="phabricator-standard-page"><div class="phabricator-main-menu phabricator-main-menu-background" id="UQ0_115"><a class="phabricator-core-user-menu phabricator-core-user-mobile-menu" data-meta="0_348" data-sigil="phui-dropdown-menu" href="#" role="button"><span class="aural-only">Page Menu</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-bars" data-meta="0_349"></span><span class="caret"></span></a><a class="phabricator-main-menu-search-button phabricator-expand-application-menu" data-meta="0_347" data-sigil="jx-toggle-class"><span class="phabricator-menu-button-icon phui-icon-view phui-font-fa fa-search" id="UQ0_132"></span></a><a class="phabricator-main-menu-brand" href="/"><span class="aural-only">Home</span><span class="phabricator-main-menu-eye" style=""></span><span class="phabricator-wordmark">Phabricator</span></a></div><div style="background-color: crimson; color: white; text-align: center; padding: 0.3rem 0;"><h1>This is an archive of the discontinued LLVM Phabricator instance.</h1></div><div class="phabricator-standard-page-body" id="phabricator-standard-page-body"><table class="phui-formation-view" data-meta="0_346" data-sigil="phuix-formation-view" id="UQ0_113"><tbody><tr><td class="phui-formation-desktop-only" data-autoid="autoid_3" id="UQ0_2" style="width: 240px; display: none;"><div class="phui-flank-view phui-flank-view-fixed" id="UQ0_6" style="width: 240px; top: 44px;"><div class="phui-flank-view-head" id="UQ0_3"><div class="phui-flank-header"><div class="phui-flank-header-text">Paths</div><div class="phui-flank-header-hide phui-flank-header-hide-left" data-sigil="phui-flank-header-hide"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-chevron-left grey" data-meta="0_0"></span></div></div><ul class="phui-list-view"><li class="phui-list-item-view phui-list-item-type-link phui-list-item-has-icon"><a class="phui-list-item-href" data-meta="0_1" data-sigil="has-key-command" href="#"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-list phui-list-item-icon" data-meta="0_2"></span><span class="phui-list-item-name">Table of Contents</span><span class="keyboard-shortcut-key">t</span></a></li></ul></div><div class="phui-flank-view-body" id="UQ0_4" style="max-height: 0px;"><ul class="diff-tree-view"><li class="diff-tree-path" data-autoid="autoid_9"><div class="diff-tree-path-indent" style="margin-left: 0px;"><div class="diff-tree-path-inlines">-</div><div class="diff-tree-path-icon diff-tree-path-icon-hidden"><span class="phui-icon-view phui-font-fa fa-times-circle-o"></span></div><div class="diff-tree-path-icon diff-tree-path-icon-kind"><span class="phui-icon-view phui-font-fa fa-folder-open-o grey"></span></div><div class="diff-tree-path-name">clang/</div></div></li><li class="diff-tree-path" data-autoid="autoid_10"><div class="diff-tree-path-indent" style="margin-left: 8px;"><div class="diff-tree-path-inlines">-</div><div class="diff-tree-path-icon diff-tree-path-icon-hidden"><span class="phui-icon-view phui-font-fa fa-times-circle-o"></span></div><div class="diff-tree-path-icon diff-tree-path-icon-kind"><span class="phui-icon-view phui-font-fa fa-folder-open-o grey"></span></div><div class="diff-tree-path-name">lib/Sema/</div></div></li><li class="diff-tree-path" data-autoid="autoid_11" style="display: none;"><div class="diff-tree-path-indent" style="margin-left: 8px;"><div class="diff-tree-path-inlines">-</div><div class="diff-tree-path-icon diff-tree-path-icon-hidden"><span class="phui-icon-view phui-font-fa fa-times-circle-o"></span></div><div class="diff-tree-path-icon diff-tree-path-icon-kind"><span class="phui-icon-view phui-font-fa fa-folder-open-o grey"></span></div><div class="diff-tree-path-name">Sema/</div></div></li><li class="diff-tree-path diff-tree-path-changeset" data-autoid="autoid_7"><div class="diff-tree-path-indent" style="margin-left: 16px;"><div class="diff-tree-path-inlines">-</div><div class="diff-tree-path-icon diff-tree-path-icon-hidden"><span class="phui-icon-view phui-font-fa fa-times-circle-o"></span></div><div class="diff-tree-path-icon diff-tree-path-icon-kind"><span class="phui-icon-view phui-font-fa fa-file-text-o bluetext"></span></div><div class="diff-tree-path-name">SemaInit.cpp</div></div></li><li class="diff-tree-path" data-autoid="autoid_12"><div class="diff-tree-path-indent" style="margin-left: 8px;"><div class="diff-tree-path-inlines">-</div><div class="diff-tree-path-icon diff-tree-path-icon-hidden"><span class="phui-icon-view phui-font-fa fa-times-circle-o"></span></div><div class="diff-tree-path-icon diff-tree-path-icon-kind"><span class="phui-icon-view phui-font-fa fa-folder-open-o grey"></span></div><div class="diff-tree-path-name">test/SemaCXX/</div></div></li><li class="diff-tree-path" data-autoid="autoid_13" style="display: none;"><div class="diff-tree-path-indent" style="margin-left: 8px;"><div class="diff-tree-path-inlines">-</div><div class="diff-tree-path-icon diff-tree-path-icon-hidden"><span class="phui-icon-view phui-font-fa fa-times-circle-o"></span></div><div class="diff-tree-path-icon diff-tree-path-icon-kind"><span class="phui-icon-view phui-font-fa fa-folder-open-o grey"></span></div><div class="diff-tree-path-name">SemaCXX/</div></div></li><li class="diff-tree-path diff-tree-path-changeset" data-autoid="autoid_8"><div class="diff-tree-path-indent" style="margin-left: 16px;"><div class="diff-tree-path-inlines">-</div><div class="diff-tree-path-icon diff-tree-path-icon-hidden"><span class="phui-icon-view phui-font-fa fa-times-circle-o"></span></div><div class="diff-tree-path-icon diff-tree-path-icon-kind"><span class="phui-icon-view phui-font-fa fa-file-text-o bluetext"></span></div><div class="diff-tree-path-name">cxx0x-initializer-constructor.cpp</div></div></li></ul></div><div class="phui-flank-view-tail" id="UQ0_5"><ul class="phui-list-view"><li class="phui-list-item-view phui-list-item-type-link phui-list-item-has-icon"><a class="phui-list-item-href" data-meta="0_3" data-sigil="has-key-command" href="#"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-chevron-left phui-list-item-icon" data-meta="0_4"></span><span class="phui-list-item-name">Hide Panel</span><span class="keyboard-shortcut-key">f</span></a></li><li class="phui-list-item-view phui-list-item-type-link phui-list-item-has-icon"><a class="phui-list-item-href" data-meta="0_5" data-sigil="has-key-command" href="#"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-keyboard-o phui-list-item-icon" data-meta="0_6"></span><span class="phui-list-item-name">Keyboard Reference</span><span class="keyboard-shortcut-key">?</span></a></li></ul></div></div></td><td class="phui-formation-desktop-only" data-autoid="autoid_5" id="UQ0_7" style="width: 8px; display: none;"><div class="phui-formation-resizer" id="UQ0_8" style="width: 8px;"></div></td><td class="" data-autoid="autoid_6" id="UQ0_9" style=""><div class="phui-formation-view-content"><div class="phui-crumbs-view phui-crumbs-border"><a class="phui-crumb-view phui-crumb-has-icon" href="/differential/"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-cog" data-meta="0_7"></span><span class="phui-crumb-name"> Differential</span> </a><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-angle-right phui-crumb-divider phui-crumb-view" data-meta="0_8"></span><span class="phui-crumb-view phabricator-last-crumb"><span class="phui-crumb-name"> D17407</span> </span></div><div class="phui-two-column-view phui-side-column-right with-subheader"><div class="phui-two-column-container"><div class="phui-two-column-header"><div class="phui-header-shell phui-header-tall"><h1 class="phui-header-view"><div class="phui-header-row"><div class="phui-header-col2"><span class="phui-header-header"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-cog phui-header-icon" data-meta="0_340"></span>[Sema] PR25755 Handle out of order designated initializers </span><div class="phui-header-subheader"><span class="phui-tag-view phui-tag-type-shade phui-tag-indigo phui-tag-shade phui-tag-icon-view"><span class="phui-tag-core"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-plane" data-meta="0_343"></span>Abandoned</span></span><span class="policy-header-callout"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-globe bluegrey" data-meta="0_342"></span><a class="policy-link" data-sigil="workflow" href="/policy/explain/PHID-DREV-ywufdpxvrh23qcwn4xvt/view/">Public</a></span></div></div><div class="phui-header-col3"></div></div></h1></div></div><div class="phui-two-column-subheader"><div class="phui-head-thing-view phui-head-has-image head-thing-small"><a aria-hidden="true" class="visual-only phui-head-thing-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a>Authored by <strong><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a></strong> on Feb 18 2016, 12:58 PM.</div></div><div class="phui-two-column-content"><div class="phui-two-column-row grouped"><div class="phui-side-column"><div class=""><div class="phui-box phui-box-border phui-object-box mlt mll mlr phui-two-column-properties"><ul class="phabricator-action-list-view" id="UQ0_0"><li class="phabricator-action-view phabricator-action-view-href action-has-icon" id="UQ0_81" style=""><a class="phabricator-action-view-item" href="/D17407?large=true&amp;id=&amp;download=true"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-download phabricator-action-view-icon" data-meta="0_275"></span>Download Raw Diff</a></li></ul></div></div></div><div class="phui-main-column"><div class="phui-box phui-box-border phui-object-box mlt mll mlr phui-box-blue-property"><div class="phui-header-shell"><h1 class="phui-header-view"><div class="phui-header-row"><div class="phui-header-col2"><span class="phui-header-header">Details</span></div><div class="phui-header-col3"></div></div></h1></div><div class="phui-property-list-section"><div class="phui-property-list-container grouped"><div class="phui-property-list-properties-wrap"><dl class="phui-property-list-properties"><dt class="phui-property-list-key">Reviewers </dt><dd class="phui-property-list-value"><table class="phui-status-list-view"><tbody><tr class=""><td class="phui-status-item-target"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-comment-o bluegrey" data-meta="0_11" data-sigil="has-tooltip"></span><a class="phui-handle phui-link-person" data-meta="0_9" data-sigil="hovercard" href="/p/rsmith/">rsmith</a></td><td class="phui-status-item-note"></td></tr><tr class=""><td class="phui-status-item-target"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-circle-o bluegrey" data-meta="0_12" data-sigil="has-tooltip"></span><a class="phui-handle phui-link-person" data-meta="0_10" data-sigil="hovercard" href="/p/CornedBee/">CornedBee</a></td><td class="phui-status-item-note"></td></tr></tbody></table> </dd></dl></div></div><div class="phui-property-list-section-header"><span class="phui-property-list-section-header-icon"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-align-left bluegrey" data-meta="0_13"></span>Summary</span></div><div class="phui-property-list-text-content"><div class="phabricator-remarkup"><p>Keep track of which fields have been initialized when designated initializers are used, and only verify the unseen ones can be implicitly initialized them at the top level object.</p></div></div></div></div><div class="phui-box phui-box-border phui-object-box mlt mll mlr phui-box-blue-property"><div class="phui-header-shell"><h1 class="phui-header-view"><div class="phui-header-row"><div class="phui-header-col2"><span class="phui-header-header">Diff Detail</span></div><div class="phui-header-col3"></div></div></h1></div><div class="" data-meta="0_16" data-sigil="phui-tab-group-view"><div id="UQ0_10"><div class=""><div class="phui-property-list-section"><div class="phui-property-list-container grouped"><div class="phui-property-list-properties-wrap"><dl class="phui-property-list-properties"><dt class="phui-property-list-key">Repository </dt><dd class="phui-property-list-value"><a class="phui-handle" href="/source/llvm-github/">rG LLVM Github Monorepo</a> </dd><dt class="phui-property-list-key">Build Status </dt><dd class="phui-property-list-value"><table class="phui-status-list-view"><tbody><tr class=""><td class="phui-status-item-target"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-check-circle green" data-meta="0_14" data-sigil="has-tooltip"></span><strong><a href="/B29478">Buildable 29478</a></strong></td><td class="phui-status-item-note"></td></tr><tr class=""><td class="phui-status-item-target"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-check-circle green" data-meta="0_15" data-sigil="has-tooltip"></span><a class="phui-handle" href="/harbormaster/build/29477/">Build 29477: arc lint + arc unit</a></td><td class="phui-status-item-note"></td></tr></tbody></table> </dd></dl></div></div></div></div></div></div></div><div class="phui-timeline-view" id="UQ0_11"><h3 class="aural-only">Event Timeline</h3><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell phui-timeline-sky" data-meta="0_68" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-minor-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><a class="phabricator-anchor-view" id="356199" name="356199"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill fill-has-color phui-timeline-icon-fill-sky"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-refresh phui-timeline-icon" data-meta="0_63"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> updated this revision to <a class="phui-handle" href="/differential/diff/48389/">Diff 48389</a>.<span class="phui-timeline-extra"><a data-meta="0_62" data-sigil="has-tooltip" href="#356199">Feb 18 2016, 12:58 PM</a></span></div><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-pencil phui-timeline-icon" data-meta="0_64"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> retitled this revision from <span class="phui-timeline-value"></span> to <span class="phui-timeline-value">[Sema] PR25755 Fix crash when initializing out-of-order struct references</span>.</div><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-pencil phui-timeline-icon" data-meta="0_65"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> updated this object.</div><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-user phui-timeline-icon" data-meta="0_66"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> added a reviewer: <a class="phui-handle phui-link-person" href="/p/rsmith/">rsmith</a>.</div><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-user-plus phui-timeline-icon" data-meta="0_67"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> added a subscriber: <a class="phui-handle phui-link-person" data-meta="0_25" data-sigil="hovercard" href="/p/cfe-commits/">cfe-commits</a>.</div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell phui-timeline-sky" data-meta="0_77" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="357665" name="357665"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill fill-has-color phui-timeline-icon-fill-sky"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-refresh phui-timeline-icon" data-meta="0_76"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> updated this revision to <a class="phui-handle" href="/differential/diff/48561/">Diff 48561</a>.<span class="phui-timeline-extra"><a data-meta="0_75" data-sigil="has-tooltip" href="#357665">Feb 19 2016, 5:06 PM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_73" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_74"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_26" data-sigil="transaction-comment"><div class="phabricator-remarkup"><ul class="remarkup-list">
<li class="remarkup-list-item">Fix additional tests</li>
</ul></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell phui-timeline-sky" data-meta="0_86" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="359683" name="359683"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill fill-has-color phui-timeline-icon-fill-sky"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-refresh phui-timeline-icon" data-meta="0_85"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> updated this revision to <a class="phui-handle" href="/differential/diff/48815/">Diff 48815</a>.<span class="phui-timeline-extra"><a data-meta="0_84" data-sigil="has-tooltip" href="#359683">Feb 23 2016, 6:48 AM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_82" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_83"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_27" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Moved new test into existing test file.</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_89" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-minor-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><a class="phabricator-anchor-view" id="359689" name="359689"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-user phui-timeline-icon" data-meta="0_88"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> added a reviewer: <a class="phui-handle phui-link-person" href="/p/CornedBee/">CornedBee</a>.<span class="phui-timeline-extra"><a data-meta="0_87" data-sigil="has-tooltip" href="#359689">Feb 23 2016, 6:51 AM</a></span></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_98" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="363281" name="363281"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-comment phui-timeline-icon" data-meta="0_97"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> added a comment.<span class="phui-timeline-extra"><a data-meta="0_96" data-sigil="has-tooltip" href="#363281">Feb 26 2016, 3:18 PM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_94" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_95"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_28" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Current diff is incorrect, but I did find the problem.</p>

<p>When iterating over the fields of a record, we use an iterator.  The problem is that if we use a designator, we reset the iterator value, so we can no longer check Field != FieldEnd if the designators are out of order.</p>

<p>So, if we want to allow designators to be out of order, we'll need to keep track of what was actually initialized, not just that we initialized the correct number.  (see SemaInit.cpp:1825)</p>

<p>I'll work up a fix.</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell phui-timeline-sky" data-meta="0_107" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="363491" name="363491"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill fill-has-color phui-timeline-icon-fill-sky"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-refresh phui-timeline-icon" data-meta="0_106"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> updated this revision to <a class="phui-handle" href="/differential/diff/49281/">Diff 49281</a>.<span class="phui-timeline-extra"><a data-meta="0_105" data-sigil="has-tooltip" href="#363491">Feb 26 2016, 9:01 PM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_103" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_104"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_29" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>When checking record initialization, maintain a vector of remaining<br/>
fields that were not explicitly initialized and check only those<br/>
fields to see if they can be default initialized.</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_110" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-minor-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><a class="phabricator-anchor-view" id="363493" name="363493"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-pencil phui-timeline-icon" data-meta="0_109"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> updated this object.<span class="phui-timeline-extra"><a data-meta="0_108" data-sigil="has-tooltip" href="#363493">Feb 26 2016, 9:07 PM</a></span></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell phui-timeline-sky" data-meta="0_119" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="363610" name="363610"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill fill-has-color phui-timeline-icon-fill-sky"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-refresh phui-timeline-icon" data-meta="0_118"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> updated this revision to <a class="phui-handle" href="/differential/diff/49295/">Diff 49295</a>.<span class="phui-timeline-extra"><a data-meta="0_117" data-sigil="has-tooltip" href="#363610">Feb 27 2016, 8:21 AM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_115" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_116"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_30" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Improve efficiency by using pair&lt;&gt; to maintain counts instead of purging seen fields.</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell phui-timeline-sky" data-meta="0_128" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="367573" name="367573"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill fill-has-color phui-timeline-icon-fill-sky"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-refresh phui-timeline-icon" data-meta="0_127"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> updated this revision to <a class="phui-handle" href="/differential/diff/49772/">Diff 49772</a>.<span class="phui-timeline-extra"><a data-meta="0_126" data-sigil="has-tooltip" href="#367573">Mar 3 2016, 1:47 PM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_124" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_125"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_31" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Improve efficiency by only keeping track of seen fields, and only when<br/>
designators have been used.</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_136" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/rsmith/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="378185" name="378185"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-comment phui-timeline-icon" data-meta="0_130"></span></span><a class="phui-handle phui-link-person" href="/p/rsmith/">rsmith</a> added inline comments.<span class="phui-timeline-extra"><a data-meta="0_129" data-sigil="has-tooltip" href="#378185">Mar 18 2016, 10:49 AM</a></span></div><div class="phui-timeline-core-content"><table class="phabricator-inline-summary-table"><tbody><tr><th class="inline-comment-summary-table-header" colspan="3"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-file-code-o darkbluetext mmr" data-meta="0_131"></span>lib/Sema/SemaInit.cpp</th></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=49772#inline-152106" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_132"></span>1732 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #49772)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_32" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Please use an <tt class="remarkup-monospaced">llvm::BitVector</tt> here instead.</p></div></span></div></td></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=49772#inline-152108" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_133"></span>1756–1769 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #49772)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_33" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>You can get the field index with <tt class="remarkup-monospaced">Field-&gt;getFieldIndex() - 1</tt> rather than computing it here (though watch out for the case where <tt class="remarkup-monospaced">Field == FieldEnd</tt>).</p></div></span></div></td></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=49772#inline-152111" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_134"></span>1793–1795 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #49772)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_34" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>We don't need to track whether unnamed bit-fields have been "seen". This isn't meaningful.</p></div></span></div></td></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=49772#inline-152110" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_135"></span>1808–1809 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #49772)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_35" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Once we're in the <tt class="remarkup-monospaced">hadError</tt> state, we don't need to track <tt class="remarkup-monospaced">SeenFields</tt> any more. I don't think we need this change.</p></div></span></div></td></tr></tbody></table></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell phui-timeline-sky" data-meta="0_145" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="378645" name="378645"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill fill-has-color phui-timeline-icon-fill-sky"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-refresh phui-timeline-icon" data-meta="0_144"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> updated this revision to <a class="phui-handle" href="/differential/diff/51099/">Diff 51099</a>.<span class="phui-timeline-extra"><a data-meta="0_143" data-sigil="has-tooltip" href="#378645">Mar 18 2016, 7:28 PM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_141" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_142"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_36" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Addressed comments.</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_154" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/rsmith/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="378724" name="378724"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-comment phui-timeline-icon" data-meta="0_147"></span></span><a class="phui-handle phui-link-person" href="/p/rsmith/">rsmith</a> added inline comments.<span class="phui-timeline-extra"><a data-meta="0_146" data-sigil="has-tooltip" href="#378724">Mar 19 2016, 4:07 AM</a></span></div><div class="phui-timeline-core-content"><table class="phabricator-inline-summary-table"><tbody><tr><th class="inline-comment-summary-table-header" colspan="3"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-file-code-o darkbluetext mmr" data-meta="0_148"></span>lib/Sema/SemaInit.cpp</th></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=51099#inline-152307" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_149"></span>1815–1816 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #51099)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_37" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>You don't need either of these variables.</p></div></span></div></td></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=51099#inline-152304" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_150"></span>1841–1850 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #51099)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_38" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Drop this. Instead, check for <tt class="remarkup-monospaced">CheckForMissingFields</tt> in the loop below.</p></div></span></div></td></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=51099#inline-152305" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_151"></span>1852 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #51099)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_39" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Use <tt class="remarkup-monospaced">RD-&gt;getNumFields() - 1</tt> here.</p></div></span></div></td></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=51099#inline-152306" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_152"></span>1914 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #51099)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_40" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Use <tt class="remarkup-monospaced">Field-&gt;getFieldIndex()</tt></p></div></span></div></td></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=51099#inline-152308" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_153"></span>1936–1954 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #51099)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_41" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Don't build a list of missing fields, just walk all the fields and check whether each one is in the set before processing it. (You can optimize this somewhat: if there were any designators -- including the case where <tt class="remarkup-monospaced">Field</tt> was not <tt class="remarkup-monospaced">RD-&gt;field_begin()</tt> on entry to this function -- start from <tt class="remarkup-monospaced">RD-&gt;field_begin()</tt>, otherwise start from <tt class="remarkup-monospaced">Field</tt>.)</p></div></span></div></td></tr></tbody></table></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell phui-timeline-sky" data-meta="0_163" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="378770" name="378770"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill fill-has-color phui-timeline-icon-fill-sky"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-refresh phui-timeline-icon" data-meta="0_162"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> updated this revision to <a class="phui-handle" href="/differential/diff/51114/">Diff 51114</a>.<span class="phui-timeline-extra"><a data-meta="0_161" data-sigil="has-tooltip" href="#378770">Mar 19 2016, 9:32 AM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_159" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_160"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_42" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Address additional comments.</p>

<p>Always maintain SeenFields, not just when designators are seen which<br/>
simplies the logic.  Note that there is no getNumFields() method, so<br/>
we still need to determine the total FieldSize to initialize the<br/>
BitVector and loop through it.</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_170" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="385163" name="385163"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-pencil phui-timeline-icon" data-meta="0_165"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> marked 7 inline comments as done.<span class="phui-timeline-extra"><a data-meta="0_164" data-sigil="has-tooltip" href="#385163">Mar 28 2016, 5:30 PM</a></span></div><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-comment phui-timeline-icon" data-meta="0_166"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> added inline comments.</div><div class="phui-timeline-core-content"><table class="phabricator-inline-summary-table"><tbody><tr><th class="inline-comment-summary-table-header" colspan="3"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-file-code-o darkbluetext mmr" data-meta="0_167"></span>lib/Sema/SemaInit.cpp</th></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=51114#inline-154695" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_168"></span>1815–1816 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #51114)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_43" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Still need FieldSize -- see below.</p></div></span></div></td></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=51114#inline-154694" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_169"></span>1856 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #51114)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_44" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Couldn't find getNumFields(), counted them instead.</p></div></span></div></td></tr></tbody></table></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_178" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/rsmith/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="385191" name="385191"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-comment phui-timeline-icon" data-meta="0_172"></span></span><a class="phui-handle phui-link-person" href="/p/rsmith/">rsmith</a> added inline comments.<span class="phui-timeline-extra"><a data-meta="0_171" data-sigil="has-tooltip" href="#385191">Mar 28 2016, 5:59 PM</a></span></div><div class="phui-timeline-core-content"><table class="phabricator-inline-summary-table"><tbody><tr><th class="inline-comment-summary-table-header" colspan="3"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-file-code-o darkbluetext mmr" data-meta="0_173"></span>lib/Sema/SemaInit.cpp</th></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=51114#inline-154698" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_174"></span>1818–1823 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #51114)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_45" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p><tt class="remarkup-monospaced">FieldStart</tt> isn't necessarily the first field (in particular, if we got here from a nested field designator). Instead, how about using</p>

<div class="remarkup-code-block" data-code-lang="text" data-sigil="remarkup-code-block"><pre class="remarkup-code">FieldSize = std::distance(RD-&gt;field_begin(), RD-&gt;field_end());</pre></div></div></span></div></td></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=51114#inline-154702" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_175"></span>1922 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #51114)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_46" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>The <tt class="remarkup-monospaced">CheckForMissingFields</tt> test here doesn't make much sense with this name. Please reverse the sense of this flag, rename it to <tt class="remarkup-monospaced">HadAnyDesignators</tt> or similar, and initialize it to <tt class="remarkup-monospaced">true</tt> if <tt class="remarkup-monospaced">Field != RD-&gt;field_begin()</tt> before you enter the field initialization loop.</p></div></span></div></td></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=51114#inline-154699" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_176"></span>1923 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #51114)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_47" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Start from <tt class="remarkup-monospaced">RD-&gt;field_begin()</tt> here (or track the position at which you first set <tt class="remarkup-monospaced">HadAnyDesignators</tt> to <tt class="remarkup-monospaced">true</tt> and start from there). In particular, if <tt class="remarkup-monospaced">FieldStart != RD-&gt;field_begin()</tt>, then an initial sequence of fields is uninitialized unless a later designator jumped back to them.</p></div></span></div></td></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=51114#inline-154703" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_177"></span>1926–1927 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #51114)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_48" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Use <tt class="remarkup-monospaced">SeenFields[Field-&gt;getFieldIndex()]</tt> here and then remove the variable <tt class="remarkup-monospaced">i</tt>. We don't need to hardcode assumptions about how field indexes are computed here.</p></div></span></div></td></tr></tbody></table></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_187" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="385208" name="385208"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-comment phui-timeline-icon" data-meta="0_186"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> added a comment.<span class="phui-timeline-extra"><a data-meta="0_185" data-sigil="has-tooltip" href="#385208">Mar 28 2016, 6:25 PM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_183" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_184"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_49" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>I'm probably missing something, but isn't InitListChecker::CheckStructUnionTypes() called recursively, if indirectly?  In which case we'd want to start from the Field iterator we were given, not the look at all the fields.</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_192" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="385238" name="385238"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-comment phui-timeline-icon" data-meta="0_189"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> added inline comments.<span class="phui-timeline-extra"><a data-meta="0_188" data-sigil="has-tooltip" href="#385238">Mar 28 2016, 7:07 PM</a></span></div><div class="phui-timeline-core-content"><table class="phabricator-inline-summary-table"><tbody><tr><th class="inline-comment-summary-table-header" colspan="3"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-file-code-o darkbluetext mmr" data-meta="0_190"></span>lib/Sema/SemaInit.cpp</th></tr>
<tr><td class="inline-line-number inline-table-dolumn"><a class="num" href="/D17407?id=51114#inline-154711" target="_blank"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-share darkbluetext mmr" data-meta="0_191"></span>1926–1927 ↗</a></td><td class="inline-which-diff inline-table-dolumn">(On Diff #51114)</td><td class="inline-summary-content inline-table-dolumn"><div class="phabricator-remarkup"><span class="transaction-comment" data-meta="0_50" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>You raise a good point I missed.  SeenFields should be big enough to mark all fields, but we should only set/examine from FieldStart-&gt;getFieldIndex().  However, we still need the i.</p></div></span></div></td></tr></tbody></table></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_201" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/rsmith/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="395130" name="395130"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-user phui-timeline-icon" data-meta="0_200"></span></span><a class="phui-handle phui-link-person" href="/p/rsmith/">rsmith</a> edited edge metadata.<span class="phui-timeline-extra"><a data-meta="0_199" data-sigil="has-tooltip" href="#395130">Apr 7 2016, 6:23 PM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_197" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_198"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_51" data-sigil="transaction-comment"><div class="phabricator-remarkup"><blockquote class="remarkup-reply-block">
<div class="remarkup-reply-head">In <a class="phui-tag-view phui-tag-type-object" data-meta="0_17" data-sigil="hovercard" href="/D17407#385208"><span class="phui-tag-core-closed"><span class="phui-tag-core phui-tag-color-object">D17407#385208</span></span></a>, <a class="phui-tag-view phui-tag-type-person" data-meta="0_18" data-sigil="hovercard" href="/p/hintonda/"><span class="phui-tag-core phui-tag-color-person">@hintonda</span></a> wrote:</div>
<div class="remarkup-reply-body"><p>I'm probably missing something, but isn't InitListChecker::CheckStructUnionTypes() called recursively, if indirectly?  In which case we'd want to start from the Field iterator we were given, not the look at all the fields.</p></div>
</blockquote>

<p>No: if <tt class="remarkup-monospaced">CheckDesignatedInitializer</tt> finds a top-level designator (denoting a field in the same struct for which it was called, rather than a subobject of that field), it just returns. <tt class="remarkup-monospaced">CheckStructUnionTypes</tt> should never recursively re-enter the same subobject.</p>

<p>However, you do make a good point: we *can* enter <tt class="remarkup-monospaced">CheckStructUnionTypes</tt> multiple times for the same subobject, in a case like</p>

<div class="remarkup-code-block" data-code-lang="text" data-sigil="remarkup-code-block"><pre class="remarkup-code">struct Q { Q(int); }
struct A { Q x, y; };
struct B { A a; int k; };
B b = { .a.y = 0, 0, .a.x = 0 };</pre></div>

<p>... and we should not <tt class="remarkup-monospaced">CheckEmptyInitializable</tt> in that case, nor warn that an initializer for <tt class="remarkup-monospaced">a.x</tt> is missing. (But we should do so if the final initializer for <tt class="remarkup-monospaced">a.x</tt> is not present.)</p>

<p>It looks like we need to do all this checking as a separate pass after checking the initialization, even in <tt class="remarkup-monospaced">VerifyOnly</tt> mode.</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell phui-timeline-sky" data-meta="0_210" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="1439015" name="1439015"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill fill-has-color phui-timeline-icon-fill-sky"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-refresh phui-timeline-icon" data-meta="0_209"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> updated this revision to <a class="phui-handle" href="/differential/diff/191828/">Diff 191828</a>.<span class="phui-timeline-extra"><a data-meta="0_208" data-sigil="has-tooltip" href="#1439015">Mar 22 2019, 12:28 AM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_206" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_207"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_52" data-sigil="transaction-comment"><div class="phabricator-remarkup"><ul class="remarkup-list">
<li class="remarkup-list-item">Initial checkin from original <a class="phui-tag-view phui-tag-type-object" data-meta="0_19" data-sigil="hovercard" href="/D17407"><span class="phui-tag-core-closed"><span class="phui-tag-core phui-tag-color-object">D17407</span></span></a>.</li>
<li class="remarkup-list-item">Refactored code and simplify tests based on review comments.</li>
</ul></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_214" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-minor-event"><div class="phui-timeline-content"><div class="phui-timeline-wedge" style="display: none;"></div><div class="phui-timeline-group"><a class="phabricator-anchor-view" id="1439018" name="1439018"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-link phui-timeline-icon" data-meta="0_212"></span></span><a class="phui-handle" href="/herald/">Herald</a> added a project: <span class="phui-handle"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-lock lightgreytext" data-meta="0_53"></span>Restricted Project</span>. <span class="phui-timeline-extra-information"> ·  <a href="/herald/transcript/463077/">View Herald Transcript</a></span><span class="phui-timeline-extra"><a data-meta="0_211" data-sigil="has-tooltip" href="#1439018">Mar 22 2019, 12:28 AM</a></span></div><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-user-plus phui-timeline-icon" data-meta="0_213"></span></span><a class="phui-handle" href="/herald/">Herald</a> added a subscriber: <a class="phui-handle phui-link-person" data-meta="0_54" data-sigil="hovercard" href="/p/jdoerfert/">jdoerfert</a>. <span class="phui-timeline-extra-information"> ·  <a href="/herald/transcript/463077/">View Herald Transcript</a></span></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell phui-timeline-green" data-meta="0_217" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-minor-event"><div class="phui-timeline-content"><div class="phui-timeline-wedge" style="display: none;"></div><div class="phui-timeline-group"><a class="phabricator-anchor-view" id="1439019" name="1439019"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill fill-has-color phui-timeline-icon-fill-green"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-check-circle phui-timeline-icon" data-meta="0_216"></span></span><a class="phui-handle" href="/harbormaster/">Harbormaster</a> completed remote builds in <a class="phui-handle" href="/B29478">B29478: Diff 191828</a>.<span class="phui-timeline-extra"><a data-meta="0_215" data-sigil="has-tooltip" href="#1439019">Mar 22 2019, 12:32 AM</a></span></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_221" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-minor-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><a class="phabricator-anchor-view" id="1439020" name="1439020"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-pencil phui-timeline-icon" data-meta="0_219"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> retitled this revision from <span class="phui-timeline-value">[Sema] PR25755 Fix crash when initializing out-of-order struct references</span> to <span class="phui-timeline-value">[Sema] PR25755 Handle out of order designated initializers </span>.<span class="phui-timeline-extra"><a data-meta="0_218" data-sigil="has-tooltip" href="#1439020">Mar 22 2019, 12:36 AM</a></span></div><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-pencil phui-timeline-icon" data-meta="0_220"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> edited the summary of this revision. <a data-sigil="workflow" href="/transactions/detail/PHID-XACT-DREV-ilslktdearlrsqp/">(Show Details)</a></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_230" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/xbolva00/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="1439030" name="1439030"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-user-plus phui-timeline-icon" data-meta="0_229"></span></span><a class="phui-handle phui-link-person" href="/p/xbolva00/">xbolva00</a> added a subscriber: <a class="phui-handle phui-link-person" data-meta="0_56" data-sigil="hovercard" href="/p/xbolva00/">xbolva00</a>.<span class="phui-timeline-extra"><a data-meta="0_228" data-sigil="has-tooltip" href="#1439030">Mar 22 2019, 1:04 AM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_226" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_227"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_55" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>Please check also <a class="remarkup-link" href="https://bugs.llvm.org/show_bug.cgi?id=40030" rel="nofollow" target="_blank">https://bugs.llvm.org/show_bug.cgi?id=40030</a></p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_239" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="1439035" name="1439035"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-comment phui-timeline-icon" data-meta="0_238"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> added a comment.<span class="phui-timeline-extra"><a data-meta="0_237" data-sigil="has-tooltip" href="#1439035">Mar 22 2019, 1:43 AM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_235" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_236"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_57" data-sigil="transaction-comment"><div class="phabricator-remarkup"><blockquote class="remarkup-reply-block">
<div class="remarkup-reply-head">In <a class="phui-tag-view phui-tag-type-object" data-meta="0_20" data-sigil="hovercard" href="/D17407#1439029"><span class="phui-tag-core-closed"><span class="phui-tag-core phui-tag-color-object">D17407#1439029</span></span></a>, <a class="phui-tag-view phui-tag-type-person" data-meta="0_21" data-sigil="hovercard" href="/p/xbolva00/"><span class="phui-tag-core phui-tag-color-person">@xbolva00</span></a> wrote:</div>
<div class="remarkup-reply-body"><p>Please check also <a class="remarkup-link" href="https://bugs.llvm.org/show_bug.cgi?id=40030" rel="nofollow" target="_blank">https://bugs.llvm.org/show_bug.cgi?id=40030</a></p></div>
</blockquote>

<p>Thanks for pointing that out.  I was mainly handling asserts, but will add the restrictions as well.</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_242" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-minor-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/riccibruno/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><a class="phabricator-anchor-view" id="1439366" name="1439366"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-user-plus phui-timeline-icon" data-meta="0_241"></span></span><a class="phui-handle phui-link-person" href="/p/riccibruno/">riccibruno</a> added a subscriber: <a class="phui-handle phui-link-person" data-meta="0_58" data-sigil="hovercard" href="/p/riccibruno/">riccibruno</a>.<span class="phui-timeline-extra"><a data-meta="0_240" data-sigil="has-tooltip" href="#1439366">Mar 22 2019, 6:07 AM</a></span></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_251" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="1439873" name="1439873"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-comment phui-timeline-icon" data-meta="0_250"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> added a comment.<span class="phui-timeline-extra"><a data-meta="0_249" data-sigil="has-tooltip" href="#1439873">Mar 22 2019, 12:07 PM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_247" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_248"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_59" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>I took a look at C++ designator restrictions shown here <a class="remarkup-link" href="https://en.cppreference.com/w/cpp/language/aggregate_initialization" rel="nofollow" target="_blank">aggregate initialization</a>, and believe it to be orthogonal to this change.  Thus, I'd prefer to put that in a separate patch.</p>

<p>However, based on this, I also believe I should move the tests into test/Sema/designated-initializers.c.</p>

<p>Please let me know if that sounds like the right thing to do.</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_260" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="1440694" name="1440694"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-comment phui-timeline-icon" data-meta="0_259"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> added a comment.<span class="phui-timeline-extra"><a data-meta="0_258" data-sigil="has-tooltip" href="#1440694">Mar 23 2019, 4:16 PM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_256" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_257"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_60" data-sigil="transaction-comment"><div class="phabricator-remarkup"><blockquote class="remarkup-reply-block">
<div class="remarkup-reply-head">In <a class="phui-tag-view phui-tag-type-object" data-meta="0_22" data-sigil="hovercard" href="/D17407#1439029"><span class="phui-tag-core-closed"><span class="phui-tag-core phui-tag-color-object">D17407#1439029</span></span></a>, <a class="phui-tag-view phui-tag-type-person" data-meta="0_23" data-sigil="hovercard" href="/p/xbolva00/"><span class="phui-tag-core phui-tag-color-person">@xbolva00</span></a> wrote:</div>
<div class="remarkup-reply-body"><p>Please check also <a class="remarkup-link" href="https://bugs.llvm.org/show_bug.cgi?id=40030" rel="nofollow" target="_blank">https://bugs.llvm.org/show_bug.cgi?id=40030</a></p></div>
</blockquote>

<p>If you compile with -pedantic, you'll get the following warning:  <tt class="remarkup-monospaced">warning: designated initializers are a C99 feature [-Wc99-extensions]</tt></p>

<p>This warning currently applies for all versions of C++, but should probably not warn for cases supported in c++20.  However, that's a bigger fix, since it would need to discriminate between what c++20 does and does not support, e.g., nested and out of order designators are not included in c++20.</p>

<p><a class="phui-tag-view phui-tag-type-person" data-meta="0_24" data-sigil="hovercard" href="/p/rsmith/"><span class="phui-tag-core phui-tag-color-person">@rsmith</span></a> This is ready for review when you get a chance.</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell" data-meta="0_269" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-major-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><div class="phui-timeline-inner-content"><a class="phabricator-anchor-view" id="1462153" name="1462153"></a><div class="phui-timeline-title phui-timeline-title-with-icon phui-timeline-title-with-menu"><span class="phui-timeline-icon-fill"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-comment phui-timeline-icon" data-meta="0_268"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> added a comment.<span class="phui-timeline-extra"><a data-meta="0_267" data-sigil="has-tooltip" href="#1462153">Apr 10 2019, 4:46 PM</a></span></div><a aria-expanded="false" aria-haspopup="true" class="phui-timeline-menu" data-meta="0_265" data-sigil="phui-dropdown-menu" href="#"><span class="aural-only">Comment Actions</span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-caret-down" data-meta="0_266"></span></a><div class="phui-timeline-core-content"><span class="transaction-comment" data-meta="0_61" data-sigil="transaction-comment"><div class="phabricator-remarkup"><p>ping...</p></div></span></div></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div><div class="phui-timeline-shell phui-timeline-indigo" data-meta="0_272" data-sigil="transaction anchor-container"><div class="phui-timeline-event-view phui-timeline-minor-event"><div class="phui-timeline-content"><a aria-hidden="true" class="visual-only phui-timeline-image" href="/p/hintonda/" style="background-image: url(overrides/css/profile.png)"></a><div class="phui-timeline-wedge" style=""></div><div class="phui-timeline-group"><a class="phabricator-anchor-view" id="2004164" name="2004164"></a><div class="phui-timeline-title phui-timeline-title-with-icon"><span class="phui-timeline-icon-fill fill-has-color phui-timeline-icon-fill-indigo"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-plane phui-timeline-icon" data-meta="0_271"></span></span><a class="phui-handle phui-link-person" href="/p/hintonda/">hintonda</a> abandoned this revision.<span class="phui-timeline-extra"><a data-meta="0_270" data-sigil="has-tooltip" href="#2004164">Apr 26 2020, 9:24 AM</a></span></div></div></div></div></div><div class="phui-timeline-event-view phui-timeline-spacer"></div></div></div></div></div><div class="phui-two-column-content phui-two-column-footer"><legend class="phabricator-anchor-navigation-marker" data-meta="0_289" data-sigil="marker"></legend><a class="phabricator-anchor-view" id="toc" name="toc"></a><div class="phui-box phui-box-border phui-object-box mlt mll mlr phui-box-blue-property"><div class="phui-header-shell"><h1 class="phui-header-view"><div class="phui-header-row"><div class="phui-header-col2"><span class="phui-header-header">Revision Contents</span></div><div class="phui-header-col3"></div></div></h1></div><div class="" data-meta="0_323" data-sigil="phui-tab-group-view"><ul class="phui-list-view phui-list-navbar phui-list-navbar-horizontal"><li class="phui-list-item-view phui-list-item-type-link phui-list-item-selected" data-meta="0_324" data-sigil="phui-tab-view"><a class="phui-list-item-href" data-sigil="" href="#"><span class="phui-list-item-name">Files</span></a></li><li class="phui-list-item-view phui-list-item-type-link" data-meta="0_325" data-sigil="phui-tab-view"><a class="phui-list-item-href" data-sigil="" href="#"><span class="phui-list-item-name">History</span></a></li><li class="phui-list-item-view phui-list-item-type-link" data-meta="0_326" data-sigil="phui-tab-view"><a class="phui-list-item-href" data-sigil="" href="#"><span class="phui-list-item-name">Commits</span></a></li><li class="phui-list-item-view phui-list-item-type-link" data-meta="0_327" data-sigil="phui-tab-view"><a class="phui-list-item-href" data-sigil="" href="#"><span class="phui-list-item-name">Similar</span></a></li></ul><div id="UQ0_100"><div class=""><div class="aphront-table-wrap"><table class="aphront-table-view aphront-table-view-compact"><tbody><tr><th class="diff-toc-path wide">Path</th><th class="right aphront-table-view-nodevice">Size</th></tr><tr class="diff-toc-no-changeset-row"><td class="diff-toc-path wide"><div style="padding-left: 0px;"><table><tbody><tr class="diff-path-new"><td><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-folder-open-o grey" data-meta="0_292"></span></td><td><div class="">clang/</div></td></tr></tbody></table></div></td><td class="right aphront-table-view-nodevice"></td></tr><tr class="alt alt-diff-toc-no-changeset-row"><td class="diff-toc-path wide"><div style="padding-left: 16px;"><table><tbody><tr class="diff-path-new"><td><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-folder-open-o grey" data-meta="0_294"></span></td><td><div class="">lib/</div></td><td><div class="">Sema/</div></td></tr></tbody></table></div></td><td class="right aphront-table-view-nodevice"></td></tr><tr class="diff-toc-changeset-row"><td class="diff-toc-path wide"><div style="padding-left: 32px;"><table><tbody><tr class="diff-path-new"><td><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-file-text-o bluetext" data-meta="0_296"></span></td><td><div class=""><a data-meta="0_297" data-sigil="differential-load" href="#change-sdeyxrY4eA1y">SemaInit.cpp</a></div></td></tr></tbody></table></div></td><td class="right aphront-table-view-nodevice">24 lines</td></tr><tr class="alt alt-diff-toc-no-changeset-row"><td class="diff-toc-path wide"><div style="padding-left: 16px;"><table><tbody><tr class="diff-path-new"><td><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-folder-open-o grey" data-meta="0_299"></span></td><td><div class="">test/</div></td><td><div class="">SemaCXX/</div></td></tr></tbody></table></div></td><td class="right aphront-table-view-nodevice"></td></tr><tr class="diff-toc-changeset-row"><td class="diff-toc-path wide"><div style="padding-left: 32px;"><table><tbody><tr class="diff-path-new"><td><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-file-text-o bluetext" data-meta="0_301"></span></td><td><div class=""><a data-meta="0_302" data-sigil="differential-load" href="#change-0eZFB10jpPAP">cxx0x-initializer-constructor.cpp</a></div></td></tr></tbody></table></div></td><td class="right aphront-table-view-nodevice">18 lines</td></tr></tbody></table></div></div></div><div id="UQ0_101" style="display: none;"><div class=""><form action="/D17407#toc"><div class="aphront-table-wrap"><table class="aphront-table-view"><tbody><tr><th class="pri">Diff</th><th>ID</th><th class="aphront-table-view-nodevice">Base</th><th class="wide">Description</th><th class="date aphront-table-view-nodevice">Created</th><th class="center aphront-table-view-nodevice">Lint</th><th class="center aphront-table-view-nodevice">Unit</th><th class="center differential-update-history-old"></th><th class="center differential-update-history-new"></th></tr><tr class="differential-update-history-old-now"><td class="pri">Base</td><td><a href="/D17407?id="></a></td><td class="aphront-table-view-nodevice"></td><td class="wide">Base</td><td class="date aphront-table-view-nodevice"></td><td class="center aphront-table-view-nodevice"></td><td class="center aphront-table-view-nodevice"></td><td class="center differential-update-history-old"><div class="differential-update-history-radio"><input checked="checked" id="UQ0_104" name="vs" type="radio"/></div></td><td class="center differential-update-history-new"></td></tr><tr class="alt"><td class="pri">Diff 1</td><td><a href="/D17407?id=48389">48389</a></td><td class="aphront-table-view-nodevice">259985</td><td class="wide"></td><td class="date aphront-table-view-nodevice">Feb 18 2016, 12:58 PM</td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Linters Available"><span class="diff-star-none">★</span></div></td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Unit Test Coverage"><span class="diff-star-none">★</span></div></td><td class="center differential-update-history-old"><div class="differential-update-history-radio"><input id="UQ0_105" name="vs" type="radio" value="48389"/></div></td><td class="center differential-update-history-new"><div class="differential-update-history-radio"><input data-sigil="differential-new-radio" name="id" type="radio" value="48389"/></div></td></tr><tr><td class="pri">Diff 2</td><td><a href="/D17407?id=48561">48561</a></td><td class="aphront-table-view-nodevice">261297</td><td class="wide">  - Fix additional tests</td><td class="date aphront-table-view-nodevice">Feb 19 2016, 5:06 PM</td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Linters Available"><span class="diff-star-none">★</span></div></td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Unit Test Coverage"><span class="diff-star-none">★</span></div></td><td class="center differential-update-history-old"><div class="differential-update-history-radio"><input id="UQ0_106" name="vs" type="radio" value="48561"/></div></td><td class="center differential-update-history-new"><div class="differential-update-history-radio"><input data-sigil="differential-new-radio" name="id" type="radio" value="48561"/></div></td></tr><tr class="alt"><td class="pri">Diff 3</td><td><a href="/D17407?id=48815">48815</a></td><td class="aphront-table-view-nodevice">261563</td><td class="wide">Moved new test into existing test file.</td><td class="date aphront-table-view-nodevice">Feb 23 2016, 6:48 AM</td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Linters Available"><span class="diff-star-none">★</span></div></td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Unit Test Coverage"><span class="diff-star-none">★</span></div></td><td class="center differential-update-history-old"><div class="differential-update-history-radio"><input id="UQ0_107" name="vs" type="radio" value="48815"/></div></td><td class="center differential-update-history-new"><div class="differential-update-history-radio"><input data-sigil="differential-new-radio" name="id" type="radio" value="48815"/></div></td></tr><tr><td class="pri">Diff 4</td><td><a href="/D17407?id=49281">49281</a></td><td class="aphront-table-view-nodevice">261563</td><td class="wide">When checking record initialization, maintain a vector of remaining</td><td class="date aphront-table-view-nodevice">Feb 26 2016, 9:01 PM</td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Linters Available"><span class="diff-star-none">★</span></div></td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Unit Test Coverage"><span class="diff-star-none">★</span></div></td><td class="center differential-update-history-old"><div class="differential-update-history-radio"><input id="UQ0_108" name="vs" type="radio" value="49281"/></div></td><td class="center differential-update-history-new"><div class="differential-update-history-radio"><input data-sigil="differential-new-radio" name="id" type="radio" value="49281"/></div></td></tr><tr class="alt"><td class="pri">Diff 5</td><td><a href="/D17407?id=49295">49295</a></td><td class="aphront-table-view-nodevice">261563</td><td class="wide">Improve efficiency by using pair&lt;&gt; to maintain counts instead of purging seen fields.</td><td class="date aphront-table-view-nodevice">Feb 27 2016, 8:21 AM</td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Linters Available"><span class="diff-star-none">★</span></div></td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Unit Test Coverage"><span class="diff-star-none">★</span></div></td><td class="center differential-update-history-old"><div class="differential-update-history-radio"><input id="UQ0_109" name="vs" type="radio" value="49295"/></div></td><td class="center differential-update-history-new"><div class="differential-update-history-radio"><input data-sigil="differential-new-radio" name="id" type="radio" value="49295"/></div></td></tr><tr><td class="pri">Diff 6</td><td><a href="/D17407?id=49772">49772</a></td><td class="aphront-table-view-nodevice">262138</td><td class="wide">Improve efficiency by only keeping track of seen fields, and only when</td><td class="date aphront-table-view-nodevice">Mar 3 2016, 1:47 PM</td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Linters Available"><span class="diff-star-none">★</span></div></td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Unit Test Coverage"><span class="diff-star-none">★</span></div></td><td class="center differential-update-history-old"><div class="differential-update-history-radio"><input id="UQ0_110" name="vs" type="radio" value="49772"/></div></td><td class="center differential-update-history-new"><div class="differential-update-history-radio"><input data-sigil="differential-new-radio" name="id" type="radio" value="49772"/></div></td></tr><tr class="alt"><td class="pri">Diff 7</td><td><a href="/D17407?id=51099">51099</a></td><td class="aphront-table-view-nodevice">263785</td><td class="wide">Addressed comments.</td><td class="date aphront-table-view-nodevice">Mar 18 2016, 7:28 PM</td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Linters Available"><span class="diff-star-none">★</span></div></td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Unit Test Coverage"><span class="diff-star-none">★</span></div></td><td class="center differential-update-history-old"><div class="differential-update-history-radio"><input id="UQ0_111" name="vs" type="radio" value="51099"/></div></td><td class="center differential-update-history-new"><div class="differential-update-history-radio"><input data-sigil="differential-new-radio" name="id" type="radio" value="51099"/></div></td></tr><tr><td class="pri">Diff 8</td><td><a href="/D17407?id=51114">51114</a></td><td class="aphront-table-view-nodevice">263785</td><td class="wide">Address additional comments.</td><td class="date aphront-table-view-nodevice">Mar 19 2016, 9:32 AM</td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Linters Available"><span class="diff-star-none">★</span></div></td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Unit Test Coverage"><span class="diff-star-none">★</span></div></td><td class="center differential-update-history-old"><div class="differential-update-history-radio"><input id="UQ0_112" name="vs" type="radio" value="51114"/></div></td><td class="center differential-update-history-new"><div class="differential-update-history-radio"><input data-sigil="differential-new-radio" name="id" type="radio" value="51114"/></div></td></tr><tr class="alt alt-differential-update-history-new-now"><td class="pri">Diff 9</td><td><a href="/D17407?id=191828">191828</a></td><td class="aphront-table-view-nodevice"><a href="/rGb865084ef39c64638d95da3dde2039a9fbfec338">b865084</a></td><td class="wide">  - Initial checkin from original D17407.</td><td class="date aphront-table-view-nodevice">Mar 22 2019, 12:28 AM</td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Linters Available"><span class="diff-star-none">★</span></div></td><td class="center aphront-table-view-nodevice"><div class="lintunit-star" title="No Unit Test Coverage"><span class="diff-star-none">★</span></div></td><td class="center differential-update-history-old"></td><td class="center differential-update-history-new"><div class="differential-update-history-radio"><input checked="checked" data-sigil="differential-new-radio" name="id" type="radio" value="191828"/></div></td></tr></tbody></table></div></form></div></div><div id="UQ0_102" style="display: none;"><div class=""><div class="aphront-table-wrap"><table class="aphront-table-view"><tbody><tr><th>Commit</th><th>Tree</th><th>Parents</th><th>Author</th><th class="wide">Summary</th><th class="date">Date</th></tr><tr><td>f122142ec3be</td><td>e2704607c2a5</td><td>6529644c96e3</td><td>Don Hinton</td><td class="wide"><div data-sigil="aphront-more-view">Refactored code and simplify tests based on review comments. <a data-meta="0_303" data-mustcapture="1" data-sigil="aphront-more-view-show-more" href="#">(Show More…)</a></div></td><td class="date">Mar 21 2019, 10:42 PM</td></tr><tr class="alt"><td>6529644c96e3</td><td>54a546654774</td><td><a href="/rGb865084ef39c64638d95da3dde2039a9fbfec338">b865084ef39c</a></td><td>Don Hinton</td><td class="wide"><div data-sigil="aphront-more-view">Initial checkin from original D17407.</div></td><td class="date">Mar 21 2019, 2:19 PM</td></tr></tbody></table></div></div></div><div id="UQ0_103" style="display: none;"><div class=""><ul class="phui-oi-list-view"><li class="phui-oi phui-oi-with-icons phui-oi-with-attrs phui-oi-no-bar phui-oi-enabled phui-oi-standard" data-sigil=""><div class="phui-oi-frame"><div class="phui-oi-frame-content"><div class="phui-oi-content-box"><div class="phui-oi-table"><div class="phui-oi-table-row"><div class="phui-oi-col0"><div class="phui-oi-status-icon" data-meta="0_321" data-sigil="has-tooltip"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-code grey" data-meta="0_322"></span></div></div><div class="phui-oi-col1"><div class="phui-oi-name"><span class="phui-oi-objname" data-sigil="ungrabbable">D153701</span> <a class="phui-oi-link" href="/D153701" title='[Clang] Implement P2718R0 "Lifetime extension in range-based for loops"'>[Clang] Implement P2718R0 "Lifetime extension in range-based for loops"</a></div><div class="phui-oi-content"><ul class="phui-oi-attributes"><li class="phui-oi-attribute"><span class="differential-revision-size differential-revision-large" data-meta="0_304" data-sigil="has-tooltip"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-plus" data-meta="0_305"></span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-plus" data-meta="0_306"></span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-plus" data-meta="0_307"></span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-plus" data-meta="0_308"></span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-minus" data-meta="0_309"></span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-square-o invisible" data-meta="0_310"></span><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-square-o invisible" data-meta="0_311"></span></span></li><li class="phui-oi-attribute"><span class="phui-oi-attribute-spacer">·</span>Reviewers: <span class=""><a class="phui-handle phui-link-person" data-meta="0_313" data-sigil="hovercard" href="/p/aaron.ballman/">aaron.ballman</a>, <a class="phui-handle phui-link-person" data-meta="0_314" data-sigil="hovercard" href="/p/cor3ntin/">cor3ntin</a>, <a class="phui-handle phui-link-person" data-meta="0_315" data-sigil="hovercard" href="/p/erichkeane/">erichkeane</a>, <a class="phui-handle phui-link-person" data-meta="0_316" data-sigil="hovercard" href="/p/rsmith/">rsmith</a>, <a class="phui-handle phui-link-person" data-meta="0_317" data-sigil="hovercard" href="/p/shafik/">shafik</a>, <span class="phui-handle" data-meta="0_318" data-sigil="hovercard"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-lock lightgreytext" data-meta="0_319"></span>Restricted Project</span>, <a class="phui-handle phui-link-person" data-meta="0_320" data-sigil="hovercard" href="/p/hubert.reinterpretcast/">hubert.reinterpretcast</a></span>, ...</li></ul></div></div><div class="phui-oi-col2"><div class="phui-object-icon-pane"><ul class="phui-oi-icons"><li class="phui-oi-icon"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa none phui-oi-icon-image" data-meta="0_312"></span><span class="phui-oi-icon-label">Fri, Dec 15, 7:01 AM</span></li></ul></div><div class="phui-oi-bylines"><div class="phui-oi-byline">Author: <a class="phui-handle phui-link-person" href="/p/yronglin/">yronglin</a></div></div></div></div></div></div></div></div></li></ul></div></div></div></div><div class="phui-box phui-box-border phui-object-box mlt mll mlr phui-object-box-collapsed phui-box-blue-property"><div class="phui-header-shell"><h1 class="phui-header-view"><div class="phui-header-row"><div class="phui-header-col2"><span class="phui-header-header">Diff 191828</span></div><div class="phui-header-col3"></div></div></h1></div><div class="differential-review-stage" id="differential-review-stage"><div class="differential-changeset repository-crossreference" data-autoid="autoid_1" data-meta="0_332" data-sigil="differential-changeset" id="diff-change-sdeyxrY4eA1y"><legend class="phabricator-anchor-navigation-marker" data-meta="0_330" data-sigil="marker"></legend><a class="phabricator-anchor-view" id="change-sdeyxrY4eA1y" name="change-sdeyxrY4eA1y"></a><h1 class="differential-file-icon-header" data-sigil="changeset-header"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-file-text-o" data-meta="0_331"></span><span class="differential-changeset-path-name" data-sigil="changeset-header-path-name">clang/lib/Sema/SemaInit.cpp</span></h1><div class="changeset-view-content" data-sigil="changeset-view-content"><ul class="differential-meta-notice"><li>This file is larger than 256 KB, so syntax highlighting is disabled by default.</li></ul><table class="differential-diff remarkup-code PhabricatorMonospaced diff-2up" data-sigil="differential-diff intercept-copy"><colgroup><col class="num"/><col class="left"/><col class="num"/><col class="copy"/><col class="right"/><col class="cov"/></colgroup><tbody><tr data-sigil="context-target"><td class="show-context-line n left-context"></td><td class="show-more"><a data-meta="2_0" data-mustcapture="1" data-sigil="show-more" href="#">Show First 20 Lines</a> • <a data-meta="2_1" data-mustcapture="1" data-sigil="show-more" href="#">Show All 1,994 Lines</a> • <a data-meta="2_2" data-mustcapture="1" data-sigil="show-more" href="#">▼ Show 20 Lines</a></td><td class="show-context-line n" data-n="1904"></td><td class="show-context" colspan="3">void InitListChecker::CheckStructUnionTypes(
</td></tr><tr><td class="n" data-n="1995" id="C1394984OL1995"></td><td class="" data-copy-mode="copy-l">  // because an error should get printed out elsewhere. It might be
</td><td class="n" data-n="1995" id="C1394984NL1995"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  // because an error should get printed out elsewhere. It might be
</td></tr><tr><td class="n" data-n="1996" id="C1394984OL1996"></td><td class="" data-copy-mode="copy-l">  // worthwhile to skip over the rest of the initializer, though.
</td><td class="n" data-n="1996" id="C1394984NL1996"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  // worthwhile to skip over the rest of the initializer, though.
</td></tr><tr><td class="n" data-n="1997" id="C1394984OL1997"></td><td class="" data-copy-mode="copy-l">  RecordDecl *RD = DeclType-&gt;getAs&lt;RecordType&gt;()-&gt;getDecl();
</td><td class="n" data-n="1997" id="C1394984NL1997"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  RecordDecl *RD = DeclType-&gt;getAs&lt;RecordType&gt;()-&gt;getDecl();
</td></tr><tr><td class="n" data-n="1998" id="C1394984OL1998"></td><td class="" data-copy-mode="copy-l">  RecordDecl::field_iterator FieldEnd = RD-&gt;field_end();
</td><td class="n" data-n="1998" id="C1394984NL1998"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  RecordDecl::field_iterator FieldEnd = RD-&gt;field_end();
</td></tr><tr><td class="n" data-n="1999" id="C1394984OL1999"></td><td class="" data-copy-mode="copy-l">  bool CheckForMissingFields =
</td><td class="n" data-n="1999" id="C1394984NL1999"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  bool CheckForMissingFields =
</td></tr><tr><td class="n" data-n="2000" id="C1394984OL2000"></td><td class="" data-copy-mode="copy-l">    !IList-&gt;isIdiomaticZeroInitializer(SemaRef.getLangOpts());
</td><td class="n" data-n="2000" id="C1394984NL2000"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    !IList-&gt;isIdiomaticZeroInitializer(SemaRef.getLangOpts());
</td></tr><tr><td class="n" data-n="2001" id="C1394984OL2001"></td><td class="" data-copy-mode="copy-l">  bool HasDesignatedInit = false;
</td><td class="n" data-n="2001" id="C1394984NL2001"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  bool HasDesignatedInit = false;
</td></tr><tr><td class="n" data-n="2002" id="C1394984OL2002"></td><td class="" data-copy-mode="copy-l">
</td><td class="n" data-n="2002" id="C1394984NL2002"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="2003" id="C1394984NL2003"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">  unsigned FieldSize = std::distance(RD-&gt;field_begin(), RD-&gt;field_end());
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="2004" id="C1394984NL2004"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">  llvm::BitVector SeenFields(FieldSize);
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="2005" id="C1394984NL2005"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="n" data-n="2003" id="C1394984OL2003"></td><td class="" data-copy-mode="copy-l">  while (Index &lt; IList-&gt;getNumInits()) {
</td><td class="n" data-n="2006" id="C1394984NL2006"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  while (Index &lt; IList-&gt;getNumInits()) {
</td></tr><tr><td class="n" data-n="2004" id="C1394984OL2004"></td><td class="" data-copy-mode="copy-l">    Expr *Init = IList-&gt;getInit(Index);
</td><td class="n" data-n="2007" id="C1394984NL2007"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    Expr *Init = IList-&gt;getInit(Index);
</td></tr><tr><td class="n" data-n="2005" id="C1394984OL2005"></td><td class="" data-copy-mode="copy-l">    SourceLocation InitLoc = Init-&gt;getBeginLoc();
</td><td class="n" data-n="2008" id="C1394984NL2008"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    SourceLocation InitLoc = Init-&gt;getBeginLoc();
</td></tr><tr><td class="n" data-n="2006" id="C1394984OL2006"></td><td class="" data-copy-mode="copy-l">
</td><td class="n" data-n="2009" id="C1394984NL2009"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="n" data-n="2007" id="C1394984OL2007"></td><td class="" data-copy-mode="copy-l">    if (DesignatedInitExpr *DIE = dyn_cast&lt;DesignatedInitExpr&gt;(Init)) {
</td><td class="n" data-n="2010" id="C1394984NL2010"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    if (DesignatedInitExpr *DIE = dyn_cast&lt;DesignatedInitExpr&gt;(Init)) {
</td></tr><tr><td class="n" data-n="2008" id="C1394984OL2008"></td><td class="" data-copy-mode="copy-l">      // If we're not the subobject that matches up with the '{' for
</td><td class="n" data-n="2011" id="C1394984NL2011"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      // If we're not the subobject that matches up with the '{' for
</td></tr><tr><td class="n" data-n="2009" id="C1394984OL2009"></td><td class="" data-copy-mode="copy-l">      // the designator, we shouldn't be handling the
</td><td class="n" data-n="2012" id="C1394984NL2012"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      // the designator, we shouldn't be handling the
</td></tr><tr><td class="n" data-n="2010" id="C1394984OL2010"></td><td class="" data-copy-mode="copy-l">      // designator. Return immediately.
</td><td class="n" data-n="2013" id="C1394984NL2013"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      // designator. Return immediately.
</td></tr><tr data-sigil="context-target"><td class="show-context-line n left-context"></td><td class="show-more"><a data-meta="2_3" data-mustcapture="1" data-sigil="show-more" href="#">Show All 16 Lines</a></td><td class="show-context-line n" data-n="2010"></td><td class="show-context" colspan="3">    if (DesignatedInitExpr *DIE = dyn_cast&lt;DesignatedInitExpr&gt;(Init)) {
</td></tr><tr><td class="n" data-n="2027" id="C1394984OL2027"></td><td class="" data-copy-mode="copy-l">          ++F;
</td><td class="n" data-n="2030" id="C1394984NL2030"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">          ++F;
</td></tr><tr><td class="n" data-n="2028" id="C1394984OL2028"></td><td class="" data-copy-mode="copy-l">        QualType ET = SemaRef.Context.getBaseElementType(F-&gt;getType());
</td><td class="n" data-n="2031" id="C1394984NL2031"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">        QualType ET = SemaRef.Context.getBaseElementType(F-&gt;getType());
</td></tr><tr><td class="n" data-n="2029" id="C1394984OL2029"></td><td class="" data-copy-mode="copy-l">        if (hasAccessibleDestructor(ET, InitLoc, SemaRef)) {
</td><td class="n" data-n="2032" id="C1394984NL2032"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">        if (hasAccessibleDestructor(ET, InitLoc, SemaRef)) {
</td></tr><tr><td class="n" data-n="2030" id="C1394984OL2030"></td><td class="" data-copy-mode="copy-l">          hadError = true;
</td><td class="n" data-n="2033" id="C1394984NL2033"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">          hadError = true;
</td></tr><tr><td class="n" data-n="2031" id="C1394984OL2031"></td><td class="" data-copy-mode="copy-l">          return;
</td><td class="n" data-n="2034" id="C1394984NL2034"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">          return;
</td></tr><tr><td class="n" data-n="2032" id="C1394984OL2032"></td><td class="" data-copy-mode="copy-l">        }
</td><td class="n" data-n="2035" id="C1394984NL2035"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">        }
</td></tr><tr><td class="n" data-n="2033" id="C1394984OL2033"></td><td class="" data-copy-mode="copy-l">      }
</td><td class="n" data-n="2036" id="C1394984NL2036"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      }
</td></tr><tr><td class="n" data-n="2034" id="C1394984OL2034"></td><td class="" data-copy-mode="copy-l">
</td><td class="n" data-n="2037" id="C1394984NL2037"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="2038" id="C1394984NL2038"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">      if (!hadError)
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="2039" id="C1394984NL2039"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">        SeenFields.set(Field == FieldEnd ? FieldSize - 1
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="2040" id="C1394984NL2040"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">                                         : Field-&gt;getFieldIndex() - 1);
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="2041" id="C1394984NL2041"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="n" data-n="2035" id="C1394984OL2035"></td><td class="" data-copy-mode="copy-l">      InitializedSomething = true;
</td><td class="n" data-n="2042" id="C1394984NL2042"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      InitializedSomething = true;
</td></tr><tr><td class="n" data-n="2036" id="C1394984OL2036"></td><td class="" data-copy-mode="copy-l">
</td><td class="n" data-n="2043" id="C1394984NL2043"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="n" data-n="2037" id="C1394984OL2037"></td><td class="" data-copy-mode="copy-l">      // Disable check for missing fields when designators are used.
</td><td class="n" data-n="2044" id="C1394984NL2044"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      // Disable check for missing fields when designators are used.
</td></tr><tr><td class="n" data-n="2038" id="C1394984OL2038"></td><td class="" data-copy-mode="copy-l">      // This matches gcc behaviour.
</td><td class="n" data-n="2045" id="C1394984NL2045"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      // This matches gcc behaviour.
</td></tr><tr><td class="n" data-n="2039" id="C1394984OL2039"></td><td class="" data-copy-mode="copy-l">      CheckForMissingFields = false;
</td><td class="n" data-n="2046" id="C1394984NL2046"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      CheckForMissingFields = false;
</td></tr><tr><td class="n" data-n="2040" id="C1394984OL2040"></td><td class="" data-copy-mode="copy-l">      continue;
</td><td class="n" data-n="2047" id="C1394984NL2047"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      continue;
</td></tr><tr><td class="n" data-n="2041" id="C1394984OL2041"></td><td class="" data-copy-mode="copy-l">    }
</td><td class="n" data-n="2048" id="C1394984NL2048"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    }
</td></tr><tr><td class="n" data-n="2042" id="C1394984OL2042"></td><td class="" data-copy-mode="copy-l">
</td><td class="n" data-n="2049" id="C1394984NL2049"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="n" data-n="2043" id="C1394984OL2043"></td><td class="" data-copy-mode="copy-l">    if (Field == FieldEnd) {
</td><td class="n" data-n="2050" id="C1394984NL2050"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    if (Field == FieldEnd) {
</td></tr><tr><td class="n" data-n="2044" id="C1394984OL2044"></td><td class="" data-copy-mode="copy-l">      // We've run out of fields. We're done.
</td><td class="n" data-n="2051" id="C1394984NL2051"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      // We've run out of fields. We're done.
</td></tr><tr><td class="n" data-n="2045" id="C1394984OL2045"></td><td class="" data-copy-mode="copy-l">      break;
</td><td class="n" data-n="2052" id="C1394984NL2052"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      break;
</td></tr><tr><td class="n" data-n="2046" id="C1394984OL2046"></td><td class="" data-copy-mode="copy-l">    }
</td><td class="n" data-n="2053" id="C1394984NL2053"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    }
</td></tr><tr><td class="n" data-n="2047" id="C1394984OL2047"></td><td class="" data-copy-mode="copy-l">
</td><td class="n" data-n="2054" id="C1394984NL2054"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="2055" id="C1394984NL2055"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">    SeenFields.set(Field-&gt;getFieldIndex());
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="2056" id="C1394984NL2056"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="n" data-n="2048" id="C1394984OL2048"></td><td class="" data-copy-mode="copy-l">    // We've already initialized a member of a union. We're done.
</td><td class="n" data-n="2057" id="C1394984NL2057"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    // We've already initialized a member of a union. We're done.
</td></tr><tr><td class="n" data-n="2049" id="C1394984OL2049"></td><td class="" data-copy-mode="copy-l">    if (InitializedSomething &amp;&amp; DeclType-&gt;isUnionType())
</td><td class="n" data-n="2058" id="C1394984NL2058"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    if (InitializedSomething &amp;&amp; DeclType-&gt;isUnionType())
</td></tr><tr><td class="n" data-n="2050" id="C1394984OL2050"></td><td class="" data-copy-mode="copy-l">      break;
</td><td class="n" data-n="2059" id="C1394984NL2059"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      break;
</td></tr><tr><td class="n" data-n="2051" id="C1394984OL2051"></td><td class="" data-copy-mode="copy-l">
</td><td class="n" data-n="2060" id="C1394984NL2060"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="n" data-n="2052" id="C1394984OL2052"></td><td class="" data-copy-mode="copy-l">    // If we've hit the flexible array member at the end, we're done.
</td><td class="n" data-n="2061" id="C1394984NL2061"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    // If we've hit the flexible array member at the end, we're done.
</td></tr><tr><td class="n" data-n="2053" id="C1394984OL2053"></td><td class="" data-copy-mode="copy-l">    if (Field-&gt;getType()-&gt;isIncompleteArrayType())
</td><td class="n" data-n="2062" id="C1394984NL2062"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    if (Field-&gt;getType()-&gt;isIncompleteArrayType())
</td></tr><tr><td class="n" data-n="2054" id="C1394984OL2054"></td><td class="" data-copy-mode="copy-l">      break;
</td><td class="n" data-n="2063" id="C1394984NL2063"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      break;
</td></tr><tr><td class="n" data-n="2055" id="C1394984OL2055"></td><td class="" data-copy-mode="copy-l">
</td><td class="n" data-n="2064" id="C1394984NL2064"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">
</td></tr><tr data-sigil="context-target"><td class="show-context-line n left-context"></td><td class="show-more"><a data-meta="2_4" data-mustcapture="1" data-sigil="show-more" href="#">▲ Show 20 Lines</a> • <a data-meta="2_5" data-mustcapture="1" data-sigil="show-more" href="#">Show All 50 Lines</a> • <a data-meta="2_6" data-mustcapture="1" data-sigil="show-more" href="#">▼ Show 20 Lines</a></td><td class="show-context-line n" data-n="2113"></td><td class="show-context" colspan="3">    for (RecordDecl::field_iterator it = Field, end = RD-&gt;field_end();
</td></tr><tr><td class="n" data-n="2106" id="C1394984OL2106"></td><td class="" data-copy-mode="copy-l">      if (!it-&gt;isUnnamedBitfield() &amp;&amp; !it-&gt;hasInClassInitializer()) {
</td><td class="n" data-n="2115" id="C1394984NL2115"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      if (!it-&gt;isUnnamedBitfield() &amp;&amp; !it-&gt;hasInClassInitializer()) {
</td></tr><tr><td class="n" data-n="2107" id="C1394984OL2107"></td><td class="" data-copy-mode="copy-l">        SemaRef.Diag(IList-&gt;getSourceRange().getEnd(),
</td><td class="n" data-n="2116" id="C1394984NL2116"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">        SemaRef.Diag(IList-&gt;getSourceRange().getEnd(),
</td></tr><tr><td class="n" data-n="2108" id="C1394984OL2108"></td><td class="" data-copy-mode="copy-l">                     diag::warn_missing_field_initializers) &lt;&lt; *it;
</td><td class="n" data-n="2117" id="C1394984NL2117"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">                     diag::warn_missing_field_initializers) &lt;&lt; *it;
</td></tr><tr><td class="n" data-n="2109" id="C1394984OL2109"></td><td class="" data-copy-mode="copy-l">        break;
</td><td class="n" data-n="2118" id="C1394984NL2118"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">        break;
</td></tr><tr><td class="n" data-n="2110" id="C1394984OL2110"></td><td class="" data-copy-mode="copy-l">      }
</td><td class="n" data-n="2119" id="C1394984NL2119"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">      }
</td></tr><tr><td class="n" data-n="2111" id="C1394984OL2111"></td><td class="" data-copy-mode="copy-l">    }
</td><td class="n" data-n="2120" id="C1394984NL2120"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    }
</td></tr><tr><td class="n" data-n="2112" id="C1394984OL2112"></td><td class="" data-copy-mode="copy-l">  }
</td><td class="n" data-n="2121" id="C1394984NL2121"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  }
</td></tr><tr><td class="n" data-n="2113" id="C1394984OL2113"></td><td class="" data-copy-mode="copy-l">
</td><td class="n" data-n="2122" id="C1394984NL2122"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="old n" data-n="2114" id="C1394984OL2114"></td><td class="old" data-copy-mode="copy-l">  // Check that any <span class="bright">remaining</span> fields can be value-initialized.
</td><td class="new n" data-n="2123" id="C1394984NL2123"></td><td class="copy"></td><td class="new" colspan="2" data-copy-mode="copy-r">  // Check that any <span class="bright">unseen</span> fields can be value-initialized.
</td></tr><tr><td class="old n" data-n="2115" id="C1394984OL2115"></td><td class="old" data-copy-mode="copy-l">  if (VerifyOnly &amp;&amp; <span class="bright">Field != FieldEnd</span> &amp;&amp; !DeclType-&gt;isUnionType() &amp;&amp;
</td><td class="new n" data-n="2124" id="C1394984NL2124"></td><td class="copy"></td><td class="new" colspan="2" data-copy-mode="copy-r">  if (VerifyOnly &amp;&amp; <span class="bright">TopLevelObject</span> &amp;&amp; !DeclType-&gt;isUnionType() &amp;&amp;
</td></tr><tr><td class="old n" data-n="2116" id="C1394984OL2116"></td><td class="old" data-copy-mode="copy-l">      <span class="bright">!</span>Field<span class="bright">-&gt;getType()-&gt;isIncompleteArrayType(</span>)) {
</td><td class="new n" data-n="2125" id="C1394984NL2125"></td><td class="copy"></td><td class="new" colspan="2" data-copy-mode="copy-r">      <span class="bright">(Field != </span>Field<span class="bright">End || HasDesignatedInit</span>)) {
</td></tr><tr><td class="old n" data-n="2117" id="C1394984OL2117"></td><td class="old" data-copy-mode="copy-l">    <span class="bright">// FIXME: Should check for holes left by designated initializers too.</span>
</td><td class="new n" data-n="2126" id="C1394984NL2126"></td><td class="copy"></td><td class="new" colspan="2" data-copy-mode="copy-r">    <span class="bright">Field = RD-&gt;field_begin();</span>
</td></tr><tr><td class="old n" data-n="2118" id="C1394984OL2118"></td><td class="old" data-copy-mode="copy-l">    for (<span class="bright">; Field != </span>Field<span class="bright">End</span> &amp;&amp; !hadError; ++Field) {
</td><td class="new n" data-n="2127" id="C1394984NL2127"></td><td class="copy"></td><td class="new" colspan="2" data-copy-mode="copy-r">    for (<span class="bright">unsigned i = 0; i &lt; </span>Field<span class="bright">Size</span> &amp;&amp; !hadError;<span class="bright"> ++i,</span> ++Field) {
</td></tr><tr><td class="old n" data-n="2119" id="C1394984OL2119"></td><td class="old" data-copy-mode="copy-l">      if (<span class="bright">!Field-&gt;isUnnamedBitfield() &amp;&amp; !</span>Field<span class="bright">-&gt;hasInClassInitializer()</span>)
</td><td class="new n" data-n="2128" id="C1394984NL2128"></td><td class="copy"></td><td class="new" colspan="2" data-copy-mode="copy-r">      if (<span class="bright">Seen</span>Field<span class="bright">s[i]</span>)
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="2129" id="C1394984NL2129"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">        continue;
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="2130" id="C1394984NL2130"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">      if(!Field-&gt;isUnnamedBitfield() &amp;&amp; !Field-&gt;hasInClassInitializer() &amp;&amp;
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="2131" id="C1394984NL2131"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">          !Field-&gt;getType()-&gt;isIncompleteArrayType())
</td></tr><tr><td class="n" data-n="2120" id="C1394984OL2120"></td><td class="" data-copy-mode="copy-l">        CheckEmptyInitializable(
</td><td class="n" data-n="2132" id="C1394984NL2132"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">        CheckEmptyInitializable(
</td></tr><tr><td class="n" data-n="2121" id="C1394984OL2121"></td><td class="" data-copy-mode="copy-l">            InitializedEntity::InitializeMember(*Field, &amp;Entity),
</td><td class="n" data-n="2133" id="C1394984NL2133"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">            InitializedEntity::InitializeMember(*Field, &amp;Entity),
</td></tr><tr><td class="n" data-n="2122" id="C1394984OL2122"></td><td class="" data-copy-mode="copy-l">            IList-&gt;getEndLoc());
</td><td class="n" data-n="2134" id="C1394984NL2134"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">            IList-&gt;getEndLoc());
</td></tr><tr><td class="n" data-n="2123" id="C1394984OL2123"></td><td class="" data-copy-mode="copy-l">    }
</td><td class="n" data-n="2135" id="C1394984NL2135"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    }
</td></tr><tr><td class="n" data-n="2124" id="C1394984OL2124"></td><td class="" data-copy-mode="copy-l">  }
</td><td class="n" data-n="2136" id="C1394984NL2136"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  }
</td></tr><tr><td class="n" data-n="2125" id="C1394984OL2125"></td><td class="" data-copy-mode="copy-l">
</td><td class="n" data-n="2137" id="C1394984NL2137"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="n" data-n="2126" id="C1394984OL2126"></td><td class="" data-copy-mode="copy-l">  // Check that the types of the remaining fields have accessible destructors.
</td><td class="n" data-n="2138" id="C1394984NL2138"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  // Check that the types of the remaining fields have accessible destructors.
</td></tr><tr><td class="n" data-n="2127" id="C1394984OL2127"></td><td class="" data-copy-mode="copy-l">  if (!VerifyOnly) {
</td><td class="n" data-n="2139" id="C1394984NL2139"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  if (!VerifyOnly) {
</td></tr><tr data-sigil="context-target"><td class="show-context-line n left-context"></td><td class="show-more"><a data-meta="2_7" data-mustcapture="1" data-sigil="show-more" href="#">▲ Show 20 Lines</a> • <a data-meta="2_8" data-mustcapture="1" data-sigil="show-more" href="#">Show All 7,369 Lines</a> • <a data-meta="2_9" data-mustcapture="1" data-sigil="show-more" href="#">Show Last 20 Lines</a></td><td class="show-context-line n"></td><td class="show-context" colspan="3"></td></tr></tbody></table></div></div><div class="differential-changeset repository-crossreference" data-autoid="autoid_2" data-meta="0_337" data-sigil="differential-changeset" id="diff-change-0eZFB10jpPAP"><legend class="phabricator-anchor-navigation-marker" data-meta="0_335" data-sigil="marker"></legend><a class="phabricator-anchor-view" id="change-0eZFB10jpPAP" name="change-0eZFB10jpPAP"></a><h1 class="differential-file-icon-header" data-sigil="changeset-header"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-file-text-o" data-meta="0_336"></span><span class="differential-changeset-path-name" data-sigil="changeset-header-path-name">clang/test/SemaCXX/cxx0x-initializer-constructor.cpp</span></h1><div class="changeset-view-content" data-sigil="changeset-view-content"><table class="differential-diff remarkup-code PhabricatorMonospaced diff-2up" data-sigil="differential-diff intercept-copy"><colgroup><col class="num"/><col class="left"/><col class="num"/><col class="copy"/><col class="right"/><col class="cov"/></colgroup><tbody><tr data-sigil="context-target"><td class="show-context-line n left-context"></td><td class="show-more"><a data-meta="3_0" data-mustcapture="1" data-sigil="show-more" href="#">Show First 20 Lines</a> • <a data-meta="3_1" data-mustcapture="1" data-sigil="show-more" href="#">Show All 403 Lines</a> • <a data-meta="3_2" data-mustcapture="1" data-sigil="show-more" href="#">▼ Show 20 Lines</a></td><td class="show-context-line n" data-n="385"></td><td class="show-context" colspan="3"><span class="k">namespace</span> <span class="nn">PR11410</span> <span class="p">{</span>
</td></tr><tr><td class="n" data-n="404" id="C1394985OL404"></td><td class="" data-copy-mode="copy-l">  <span class="p">};</span>
</td><td class="n" data-n="404" id="C1394985NL404"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  <span class="p">};</span>
</td></tr><tr><td class="n" data-n="405" id="C1394985OL405"></td><td class="" data-copy-mode="copy-l">  <span class="n">C</span> <span class="n">c</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</td><td class="n" data-n="405" id="C1394985NL405"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  <span class="n">C</span> <span class="n">c</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</td></tr><tr><td class="n" data-n="406" id="C1394985OL406"></td><td class="" data-copy-mode="copy-l">    <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
</td><td class="n" data-n="406" id="C1394985NL406"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
</td></tr><tr><td class="n" data-n="407" id="C1394985OL407"></td><td class="" data-copy-mode="copy-l">  <span class="p">};</span> <span class="c1">// expected-error {{ambiguous}} expected-note {{in implicit initialization of array element 2}}</span>
</td><td class="n" data-n="407" id="C1394985NL407"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  <span class="p">};</span> <span class="c1">// expected-error {{ambiguous}} expected-note {{in implicit initialization of array element 2}}</span>
</td></tr><tr><td class="n" data-n="408" id="C1394985OL408"></td><td class="" data-copy-mode="copy-l">  <span class="n">C</span> <span class="n">c2</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</td><td class="n" data-n="408" id="C1394985NL408"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  <span class="n">C</span> <span class="n">c2</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</td></tr><tr><td class="n" data-n="409" id="C1394985OL409"></td><td class="" data-copy-mode="copy-l">    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
</td><td class="n" data-n="409" id="C1394985NL409"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
</td></tr><tr><td class="n" data-n="410" id="C1394985OL410"></td><td class="" data-copy-mode="copy-l">  <span class="p">};</span> <span class="c1">// expected-error {{ambiguous}} expected-note {{in implicit initialization of array element 1}}</span>
</td><td class="n" data-n="410" id="C1394985NL410"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r">  <span class="p">};</span> <span class="c1">// expected-error {{ambiguous}} expected-note {{in implicit initialization of array element 1}}</span>
</td></tr><tr><td class="n" data-n="411" id="C1394985OL411"></td><td class="" data-copy-mode="copy-l"><span class="p">}</span>
</td><td class="n" data-n="411" id="C1394985NL411"></td><td class="copy"></td><td class="" colspan="2" data-copy-mode="copy-r"><span class="p">}</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="412" id="C1394985NL412"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="413" id="C1394985NL413"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r"><span class="k">namespace</span> <span class="nn">PR23514</span> <span class="p">{</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="414" id="C1394985NL414"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r"><span class="k">struct</span> <span class="nc">Q</span> <span class="p">{</span>  <span class="c1">// expected-note-re 4{{candidate constructor (the implicit {{(copy|move)}} constructor) not viable: requires 1 argument, but 0 were provided}}</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="415" id="C1394985NL415"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">  <span class="n">Q</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// expected-note 2{{candidate constructor not viable: requires 1 argument, but 0 were provided}}</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="416" id="C1394985NL416"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r"><span class="p">};</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="417" id="C1394985NL417"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r"><span class="k">struct</span> <span class="nc">A</span> <span class="p">{</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="418" id="C1394985NL418"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">  <span class="n">Q</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span> <span class="c1">// expected-note 2{{in implicit initialization of field 'x' with omitted initializer}}</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="419" id="C1394985NL419"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r"><span class="p">};</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="420" id="C1394985NL420"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r"><span class="k">struct</span> <span class="nc">B</span> <span class="p">{</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="421" id="C1394985NL421"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="422" id="C1394985NL422"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">  <span class="n">A</span> <span class="n">a</span><span class="p">;</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="423" id="C1394985NL423"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r">  <span class="kt">int</span> <span class="n">k</span><span class="p">;</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="424" id="C1394985NL424"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r"><span class="p">};</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="425" id="C1394985NL425"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r"><span class="n">B</span> <span class="n">w</span> <span class="o">=</span> <span class="p">{.</span><span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">.</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">10</span><span class="p">};</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="426" id="C1394985NL426"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r"><span class="n">B</span> <span class="n">x</span> <span class="o">=</span> <span class="p">{.</span><span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span> <span class="c1">// expected-error {{no matching constructor for initialization of 'PR23514::Q'}}</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="427" id="C1394985NL427"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r"><span class="n">B</span> <span class="n">y</span> <span class="o">=</span> <span class="p">{.</span><span class="n">a</span> <span class="o">=</span> <span class="p">{.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">},</span> <span class="mi">0</span><span class="p">};</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="428" id="C1394985NL428"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r"><span class="n">B</span> <span class="n">z</span> <span class="o">=</span> <span class="p">{.</span><span class="n">a</span> <span class="o">=</span> <span class="p">{.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">},</span> <span class="mi">0</span><span class="p">};</span> <span class="c1">// expected-error {{no matching constructor for initialization of 'PR23514::Q'}}</span>
</td></tr><tr><td class="n"></td><td class="" data-copy-mode="copy-l"></td><td class="new new-full n" data-n="429" id="C1394985NL429"></td><td class="copy"></td><td class="new new-full" colspan="2" data-copy-mode="copy-r"><span class="p">}</span> <span class="c1">// namespace PR23514</span>
</td></tr></tbody></table></div></div></div></div></div></div></div></div><div class="phui-formation-view-expander phui-formation-view-expander-left" data-autoid="autoid_4" data-meta="0_345" data-sigil="has-tooltip" id="UQ0_114" style=""><div class="phui-formation-view-expander-icon"><span aria-hidden="true" class="visual-only phui-icon-view phui-font-fa fa-chevron-right grey" data-meta="0_344"></span></div></div></td></tr></tbody></table></div></div></div><script src="overrides/js/core.pkg.js" type="text/javascript"></script><script src="overrides/js/differential.pkg.js" type="text/javascript"></script><data data-javelin-init-data='{"block":0,"data":[[],{"keyCommand":"t"},[],{"keyCommand":"f"},[],{"keyCommand":"?"},[],[],[],{"hoverPHID":"PHID-USER-wwlshrkez5hm5w2gouav"},{"hoverPHID":"PHID-USER-xuotf5npzcgwz5qrjgip"},{"tip":"Commented Previously","size":240},{"tip":"Review Requested","size":240},[],{"tip":"Passed","size":240},{"tip":"Passed","size":240},{"tabMap":["UQ0_10"]},{"hoverPHID":"PHID-DREV-ywufdpxvrh23qcwn4xvt"},{"hoverPHID":"PHID-USER-2g5fsy7xvbuj2o6bpug7"},{"hoverPHID":"PHID-DREV-ywufdpxvrh23qcwn4xvt"},{"hoverPHID":"PHID-DREV-ywufdpxvrh23qcwn4xvt"},{"hoverPHID":"PHID-USER-jbkqjpxjuogkfhrsk4g3"},{"hoverPHID":"PHID-DREV-ywufdpxvrh23qcwn4xvt"},{"hoverPHID":"PHID-USER-jbkqjpxjuogkfhrsk4g3"},{"hoverPHID":"PHID-USER-wwlshrkez5hm5w2gouav"},{"hoverPHID":"PHID-USER-kdjv7ia723hmikacshbs"},{"phid":"PHID-XACT-DREV-bm3el7ts4tjfuiy"},{"phid":"PHID-XACT-DREV-btwabnsmfktkltl"},{"phid":"PHID-XACT-DREV-gzsu4pype7iu3h2"},{"phid":"PHID-XACT-DREV-4blseudjavudbhm"},{"phid":"PHID-XACT-DREV-e6s7x5ymvrxhlex"},{"phid":"PHID-XACT-DREV-3tzoxkp2wizf3jv"},{"phid":"PHID-XACT-DREV-jg4y3oyaz3olios"},{"phid":"PHID-XACT-DREV-bng65j65yv7wmyh"},{"phid":"PHID-XACT-DREV-n5anlyh7ldhoucx"},{"phid":"PHID-XACT-DREV-auqylnsyvht2tsf"},{"phid":"PHID-XACT-DREV-r2i5l7vm7aedc7m"},{"phid":"PHID-XACT-DREV-rmwvlfoevpzyvio"},{"phid":"PHID-XACT-DREV-55po7wc4nfa6kja"},{"phid":"PHID-XACT-DREV-vy6c4g5zfcv5533"},{"phid":"PHID-XACT-DREV-iwca27nb2jip4da"},{"phid":"PHID-XACT-DREV-xlziy5uf3xdyd7g"},{"phid":"PHID-XACT-DREV-wnluqpxvyxtmrkg"},{"phid":"PHID-XACT-DREV-p3jq6mgs336r4bn"},{"phid":"PHID-XACT-DREV-skzoyuinyen526p"},{"phid":"PHID-XACT-DREV-3tanhzsu7tcfloz"},{"phid":"PHID-XACT-DREV-6ahtzgym2lkmxoq"},{"phid":"PHID-XACT-DREV-l74vaxhyd6utrhr"},{"phid":"PHID-XACT-DREV-asddtmp7ptyznxf"},{"phid":"PHID-XACT-DREV-g7f55omh7oziwnq"},{"phid":"PHID-XACT-DREV-wxab3c4y2btxcz5"},{"phid":"PHID-XACT-DREV-c436oppkcktxanb"},{"phid":"PHID-XACT-DREV-b53lfe3mwiqyih7"},[],{"hoverPHID":"PHID-USER-znfgvot2sm4dspz6r2f6"},{"phid":"PHID-XACT-DREV-ftldqrzilaugkby"},{"hoverPHID":"PHID-USER-jbkqjpxjuogkfhrsk4g3"},{"phid":"PHID-XACT-DREV-dn77tpvep6qn6th"},{"hoverPHID":"PHID-USER-y3s2uboicza6yx6dxjyx"},{"phid":"PHID-XACT-DREV-5axgrr5dqx3pbsf"},{"phid":"PHID-XACT-DREV-x6xyh4xc3qxhyvd"},{"phid":"PHID-XACT-DREV-27izzkfcakbz4va"},{"tip":"Via Conduit"},[],[],[],[],[],{"phid":"PHID-XACT-DREV-7xg3cyj44qe5arc","anchor":"356199"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-bm3el7ts4tjfuiy\/","ref":"D17407#357665"},[],{"anchor":"357665"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_13\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_69\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_70\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_15\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-bm3el7ts4tjfuiy\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_71\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_72\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Conduit"},[],{"phid":"PHID-XACT-DREV-ahlpjvtyorkst5o","anchor":"357665"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-btwabnsmfktkltl\/","ref":"D17407#359683"},[],{"anchor":"359683"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_17\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_78\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_79\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_19\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-btwabnsmfktkltl\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_80\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_81\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Conduit"},[],{"phid":"PHID-XACT-DREV-56zk7duiu6mkpu5","anchor":"359683"},{"tip":"Via Web"},[],{"phid":"PHID-XACT-DREV-a7gwtc23yefkebg","anchor":"359689"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-gzsu4pype7iu3h2\/","ref":"D17407#363281"},[],{"anchor":"363281"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_21\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_90\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_91\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_23\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-gzsu4pype7iu3h2\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_92\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_93\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Web"},[],{"phid":"PHID-XACT-DREV-gzsu4pype7iu3h2","anchor":"363281"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-4blseudjavudbhm\/","ref":"D17407#363491"},[],{"anchor":"363491"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_25\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_99\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_100\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_27\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-4blseudjavudbhm\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_101\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_102\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Conduit"},[],{"phid":"PHID-XACT-DREV-etfe7te4oofm2de","anchor":"363491"},{"tip":"Via Web"},[],{"phid":"PHID-XACT-DREV-bl7thzxfozlrb4b","anchor":"363493"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-e6s7x5ymvrxhlex\/","ref":"D17407#363610"},[],{"anchor":"363610"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_29\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_111\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_112\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_31\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-e6s7x5ymvrxhlex\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_113\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_114\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Conduit"},[],{"phid":"PHID-XACT-DREV-knzuc6dtqnya6r2","anchor":"363610"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-3tzoxkp2wizf3jv\/","ref":"D17407#367573"},[],{"anchor":"367573"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_33\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_120\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_121\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_35\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-3tzoxkp2wizf3jv\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_122\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_123\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Conduit"},[],{"phid":"PHID-XACT-DREV-24iljkogvxojkom","anchor":"367573"},{"tip":"Via Web"},[],[],[],[],[],[],{"phid":"PHID-XACT-DREV-n5anlyh7ldhoucx","anchor":"378185"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-r2i5l7vm7aedc7m\/","ref":"D17407#378645"},[],{"anchor":"378645"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_37\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_137\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_138\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_39\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-r2i5l7vm7aedc7m\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_139\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_140\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Conduit"},[],{"phid":"PHID-XACT-DREV-zf6udul2uxn53yj","anchor":"378645"},{"tip":"Via Web"},[],[],[],[],[],[],[],{"phid":"PHID-XACT-DREV-xlziy5uf3xdyd7g","anchor":"378724"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-wnluqpxvyxtmrkg\/","ref":"D17407#378770"},[],{"anchor":"378770"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_41\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_155\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_156\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_43\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-wnluqpxvyxtmrkg\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_157\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_158\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Conduit"},[],{"phid":"PHID-XACT-DREV-cut3msuqi2ud7v3","anchor":"378770"},{"tip":"Via Web"},[],[],[],[],[],{"phid":"PHID-XACT-DREV-bgppfcaxm3sajlh","anchor":"385163"},{"tip":"Via Web"},[],[],[],[],[],[],{"phid":"PHID-XACT-DREV-asddtmp7ptyznxf","anchor":"385191"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-g7f55omh7oziwnq\/","ref":"D17407#385208"},[],{"anchor":"385208"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_45\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_179\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_180\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_47\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-g7f55omh7oziwnq\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_181\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_182\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Web"},[],{"phid":"PHID-XACT-DREV-g7f55omh7oziwnq","anchor":"385208"},{"tip":"Via Web"},[],[],[],{"phid":"PHID-XACT-DREV-wxab3c4y2btxcz5","anchor":"385238"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-c436oppkcktxanb\/","ref":"D17407#395130"},[],{"anchor":"395130"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_49\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_193\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_194\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_51\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-c436oppkcktxanb\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_195\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_196\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Web"},[],{"phid":"PHID-XACT-DREV-s7yx2g5hkejmkoz","anchor":"395130"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-b53lfe3mwiqyih7\/","ref":"D17407#1439015"},[],{"anchor":"1439015"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_53\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_202\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_203\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_55\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-b53lfe3mwiqyih7\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_204\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_205\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Conduit"},[],{"phid":"PHID-XACT-DREV-pypkcr7wc6b3k5x","anchor":"1439015"},{"tip":"Via Herald"},[],[],{"phid":"PHID-XACT-DREV-wuzerxkqchavtzl","anchor":"1439018"},{"tip":"Via Daemon"},[],{"phid":"PHID-XACT-DREV-l3dub4duzydlqen","anchor":"1439019"},{"tip":"Via Web"},[],[],{"phid":"PHID-XACT-DREV-f24daod73iuwyem","anchor":"1439020"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-ftldqrzilaugkby\/","ref":"D17407#1439030"},[],{"anchor":"1439030"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_57\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_222\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_223\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_59\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-ftldqrzilaugkby\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_224\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_225\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Web"},[],{"phid":"PHID-XACT-DREV-ftldqrzilaugkby","anchor":"1439030"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-dn77tpvep6qn6th\/","ref":"D17407#1439035"},[],{"anchor":"1439035"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_61\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_231\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_232\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_63\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-dn77tpvep6qn6th\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_233\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_234\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Web"},[],{"phid":"PHID-XACT-DREV-dn77tpvep6qn6th","anchor":"1439035"},{"tip":"Via Web"},[],{"phid":"PHID-XACT-DREV-p4hxma6sgejk57k","anchor":"1439366"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-5axgrr5dqx3pbsf\/","ref":"D17407#1439873"},[],{"anchor":"1439873"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_65\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_243\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_244\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_67\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-5axgrr5dqx3pbsf\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_245\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_246\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Web"},[],{"phid":"PHID-XACT-DREV-5axgrr5dqx3pbsf","anchor":"1439873"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-x6xyh4xc3qxhyvd\/","ref":"D17407#1440694"},[],{"anchor":"1440694"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_69\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_252\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_253\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_71\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-x6xyh4xc3qxhyvd\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_254\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_255\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Web"},[],{"phid":"PHID-XACT-DREV-x6xyh4xc3qxhyvd","anchor":"1440694"},{"targetID":"UQ0_1","uri":"\/transactions\/quote\/PHID-XACT-DREV-27izzkfcakbz4va\/","ref":"D17407#1462153"},[],{"anchor":"1462153"},[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_73\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"#\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-quote\" data-meta=\"0_261\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-quote-left phabricator-action-view-icon\" data-meta=\"0_262\" aria-hidden=\"true\"\u003e\u003c\/span\u003eQuote Comment\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_75\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/transactions\/raw\/PHID-XACT-DREV-27izzkfcakbz4va\/\" class=\"phabricator-action-view-item\" data-sigil=\"transaction-raw\" data-meta=\"0_263\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-code phabricator-action-view-icon\" data-meta=\"0_264\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView Raw Remarkup\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"tip":"Via Web"},[],{"phid":"PHID-XACT-DREV-27izzkfcakbz4va","anchor":"1462153"},{"tip":"Via Web"},[],{"phid":"PHID-XACT-DREV-pw2p7inymdziivi","anchor":"2004164"},[],[],[],[],{"itemIDs":["UQ0_83","UQ0_84"],"caretID":"UQ0_82"},[],[],[],{"itemIDs":["UQ0_89"],"caretID":"UQ0_88"},[],[],[],[],[],[],{"hoverPHID":"PHID-PROJ-lozknewkz7sgtf34jasi"},{"anchor":"toc"},[],[],[],[],[],[],[],{"id":"diff-change-sdeyxrY4eA1y"},[],[],[],[],{"id":"diff-change-0eZFB10jpPAP"},{"more":"Refactored code and simplify tests based on review comments.\u003cbr \/\u003e\n\u003cbr \/\u003e\nOnly verify all unseen fields can be value-initialized for the top\u003cbr \/\u003e\nobject, since subobjects are handled recursively and could fail if\u003cbr \/\u003e\nindividual members are initialized via designated initializers one at\u003cbr \/\u003e\na time (see tests for an example)."},{"tip":"728 Lines \u00b7 Larger Change","align":"E","size":400},[],[],[],[],[],[],[],[],{"hoverPHID":"PHID-USER-b2kgevx55sgni4qo66ar"},{"hoverPHID":"PHID-USER-ctnmvqwbtidkdpb5azbk"},{"hoverPHID":"PHID-USER-j5t6lbevphhnqutqnfge"},{"hoverPHID":"PHID-USER-wwlshrkez5hm5w2gouav"},{"hoverPHID":"PHID-USER-dom5gotcfrnr6vgdd3tn"},{"hoverPHID":"PHID-PROJ-dspftw63xns3x3y4g2ni"},[],{"hoverPHID":"PHID-USER-xytaxib3gwz5kdmrkzkt"},{"tip":"Needs Review","size":300},[],{"tabMap":{"files":"UQ0_100","history":"UQ0_101","commits":"UQ0_102","similar":"UQ0_103"}},{"tabKey":"files"},{"tabKey":"history"},{"tabKey":"commits"},{"tabKey":"similar"},{"standaloneURI":"\/differential\/changeset\/?ref=1394984","leftURI":"\/differential\/changeset\/?view=old&amp;ref=1394984","rightURI":"\/differential\/changeset\/?view=new&amp;ref=1394984","containerID":"diff-change-sdeyxrY4eA1y"},[],{"anchor":"change-sdeyxrY4eA1y"},[],{"left":"1394984","right":"1394984","renderURI":"\/differential\/changeset\/","ref":"1394984","autoload":true,"displayPath":"\u003cspan class=\"diff-banner-path\"\u003eclang\/lib\/Sema\/\u003c\/span\u003e\u003cspan class=\"diff-banner-file\"\u003eSemaInit.cpp\u003c\/span\u003e","icon":"fa-file-text-o","pathParts":["clang","lib","Sema","SemaInit.cpp"],"pathIconIcon":"fa-file-text-o","pathIconColor":"bluetext","isLowImportance":false,"isOwned":false,"editorURITemplate":null,"editorConfigureURI":null,"loaded":false,"changesetState":null,"showPathURI":"\/source\/llvm-github\/browse\/main\/clang\/lib\/Sema\/SemaInit.cpp$2003","showDirectoryURI":"\/source\/llvm-github\/browse\/main\/clang\/lib\/Sema\/"},{"standaloneURI":"\/differential\/changeset\/?ref=1394985","leftURI":"\/differential\/changeset\/?view=old&amp;ref=1394985","rightURI":"\/differential\/changeset\/?view=new&amp;ref=1394985","containerID":"diff-change-0eZFB10jpPAP"},[],{"anchor":"change-0eZFB10jpPAP"},[],{"left":"1394985","right":"1394985","renderURI":"\/differential\/changeset\/","ref":"1394985","autoload":true,"displayPath":"\u003cspan class=\"diff-banner-path\"\u003eclang\/test\/SemaCXX\/\u003c\/span\u003e\u003cspan class=\"diff-banner-file\"\u003ecxx0x-initializer-constructor.cpp\u003c\/span\u003e","icon":"fa-file-text-o","pathParts":["clang","test","SemaCXX","cxx0x-initializer-constructor.cpp"],"pathIconIcon":"fa-file-text-o","pathIconColor":"bluetext","isLowImportance":false,"isOwned":false,"editorURITemplate":null,"editorConfigureURI":null,"loaded":false,"changesetState":null,"showPathURI":"\/source\/llvm-github\/browse\/main\/clang\/test\/SemaCXX\/cxx0x-initializer-constructor.cpp$412","showDirectoryURI":"\/source\/llvm-github\/browse\/main\/clang\/test\/SemaCXX\/"},{"menuID":"UQ0_0"},[],[],[],[],[],[],{"tip":null,"align":"E"},{"items":[{"itemID":"UQ0_2","width":240,"isVisible":false,"isRightAligned":false,"expanderID":"UQ0_114","resizer":{"itemID":"UQ0_7","controlID":"UQ0_8","widthKey":null,"visibleKey":null,"minimumWidth":150,"maximumWidth":512},"column":{"type":"flank","nodeID":"UQ0_6","isFixed":true,"headID":"UQ0_3","bodyID":"UQ0_4","tailID":"UQ0_5"}},{"itemID":"UQ0_7","width":8,"isVisible":false,"isRightAligned":null,"expanderID":null,"resizer":null,"column":null},{"itemID":"UQ0_9","width":null,"isVisible":true,"isRightAligned":null,"expanderID":null,"resizer":null,"column":null}]},{"map":{"UQ0_115":"phabricator-search-menu-expanded","UQ0_132":"menu-icon-selected"}},{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_117\" class=\"phabricator-action-view phabricator-action-view-type-label\" style=\"\"\u003e\u003cspan class=\"phabricator-action-view-item\"\u003eQueries\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\"UQ0_119\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/differential\/query\/VwhkLxBeXCJ6\/\" class=\"phabricator-action-view-item\"\u003eActive Revisions, recently changed first\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_121\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/differential\/query\/all\/\" class=\"phabricator-action-view-item\"\u003eAll Revisions\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_123\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/differential\/query\/kpppzQLwFaBm\/\" class=\"phabricator-action-view-item\"\u003eMLIR Open Revisions\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_125\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/differential\/query\/M5vQzZOH04.6\/\" class=\"phabricator-action-view-item\"\u003eLibc++ Open Reviews\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_127\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/differential\/query\/cHsGxkHENcUs\/\" class=\"phabricator-action-view-item\"\u003eLibc++ Open Reviews - Review Needed\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_129\" class=\"phabricator-action-view phabricator-action-view-type-label\" style=\"\"\u003e\u003cspan class=\"phabricator-action-view-item\"\u003eSearch\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\"UQ0_131\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/differential\/query\/advanced\/\" class=\"phabricator-action-view-item\"\u003eAdvanced Search\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"items":[{"name":"Search"},{"icon":"fa-globe","name":"All Documents","value":"all"},{"icon":"fa-cog","name":"Current Application","value":"application"},{"name":"Saved Queries"},{"icon":"fa-certificate","name":"Open Documents","value":"open"},{"icon":"fa-certificate","name":"Open Tasks","value":"open-tasks"},{"name":"More Options"},{"icon":"fa-search-plus","name":"Advanced Search","href":"\/search\/query\/advanced\/"},{"icon":"fa-book","name":"User Guide: Search","href":"https:\/\/secure.phabricator.com\/diviner\/find\/?name=Search%20User%20Guide&amp;type=article&amp;jump=1"}],"icon":"fa-globe","value":"all"},[]]}' data-javelin-init-kind="merge"></data><data data-javelin-init-data='{"refresh-csrf":[{"tokenName":"__csrf__","header":"X-Phabricator-Csrf","viaHeader":"X-Phabricator-Via","current":"B@aiojqz5re30aa9833fcc4cbb"}],"history-install":[]}' data-javelin-init-kind="behaviors"></data><data data-javelin-init-data='{"phui-hovercards":[],"phabricator-tooltips":[],"phui-tab-group":[],"phabricator-transaction-list":[],"phabricator-show-older-transactions":[{"timelineID":"UQ0_11","viewData":{"left":"191828","right":"191828","old":"1394984,1394985","new":"1394984,1394985"}}],"phabricator-watch-anchor":[],"phui-dropdown-menu":[],"phui-submenu":[],"differential-diff-radios":[{"radios":["UQ0_104","UQ0_105","UQ0_106","UQ0_107","UQ0_108","UQ0_109","UQ0_110","UQ0_111","UQ0_112"]}],"aphront-more":[],"phabricator-oncopy":[],"repository-crossreference":[{"container":"diff-change-sdeyxrY4eA1y","lang":"cpp","repositories":["PHID-REPO-f4scjekhnkmh7qilxlcy"]},{"container":"diff-change-0eZFB10jpPAP","lang":"cpp","repositories":["PHID-REPO-f4scjekhnkmh7qilxlcy"]}],"differential-populate":[{"changesetViewIDs":["diff-change-sdeyxrY4eA1y","diff-change-0eZFB10jpPAP"],"formationViewID":"UQ0_113","inlineURI":null,"inlineListURI":"\/differential\/revision\/inlines\/17407\/","isStandalone":null,"pht":{"Open in Editor":"Open in Editor","Show All Context":"Show All Context","All Context Shown":"All Context Shown","Expand File":"Expand File","Hide Changeset":"Hide Changeset","Show Path in Repository":"Show Path in Repository","Show Directory in Repository":"Show Directory in Repository","View Standalone":"View Standalone","Show Raw File (Left)":"Show Raw File (Left)","Show Raw File (Right)":"Show Raw File (Right)","Configure Editor":"Configure Editor","Load Changes":"Load Changes","View Side-by-Side Diff":"View Side-by-Side Diff","View Unified Diff":"View Unified Diff","Change Text Encoding...":"Change Text Encoding...","Highlight As...":"Highlight As...","View As Document Type...":"View As Document Type...","Loading...":"Loading...","Editing Comment":"Editing Comment","Jump to next change.":"Jump to next change.","Jump to previous change.":"Jump to previous change.","Jump to next file.":"Jump to next file.","Jump to previous file.":"Jump to previous file.","Jump to next inline comment.":"Jump to next inline comment.","Jump to previous inline comment.":"Jump to previous inline comment.","Jump to the table of contents.":"Jump to the table of contents.","Edit selected inline comment.":"Edit selected inline comment.","You must select a comment to edit.":"You must select a comment to edit.","Reply to selected inline comment or change.":"Reply to selected inline comment or change.","You must select a comment or change to reply to.":"You must select a comment or change to reply to.","Reply and quote selected inline comment.":"Reply and quote selected inline comment.","Mark or unmark selected inline comment as done.":"Mark or unmark selected inline comment as done.","You must select a comment to mark done.":"You must select a comment to mark done.","Collapse or expand inline comment.":"Collapse or expand inline comment.","You must select a comment to hide.":"You must select a comment to hide.","Jump to next inline comment, including collapsed comments.":"Jump to next inline comment, including collapsed comments.","Jump to previous inline comment, including collapsed comments.":"Jump to previous inline comment, including collapsed comments.","Hide or show the current changeset.":"Hide or show the current changeset.","You must select a file to hide or show.":"You must select a file to hide or show.","Unsaved":"Unsaved","Unsubmitted":"Unsubmitted","Comments":"Comments","Hide \"Done\" Inlines":"Hide \"Done\" Inlines","Hide Collapsed Inlines":"Hide Collapsed Inlines","Hide Older Inlines":"Hide Older Inlines","Hide All Inlines":"Hide All Inlines","Show All Inlines":"Show All Inlines","List Inline Comments":"List Inline Comments","Display Options":"Display Options","Hide or show all inline comments.":"Hide or show all inline comments.","Finish editing inline comments before changing display modes.":"Finish editing inline comments before changing display modes.","Open file in external editor.":"Open file in external editor.","You must select a file to edit.":"You must select a file to edit.","You must select a file to open.":"You must select a file to open.","No external editor is configured.":"No external editor is configured.","Hide or show the paths panel.":"Hide or show the paths panel.","Show path in repository.":"Show path in repository.","Show directory in repository.":"Show directory in repository.","Jump to the comment area.":"Jump to the comment area.","Show Changeset":"Show Changeset","You must select source text to create a new inline comment.":"You must select source text to create a new inline comment.","New Inline Comment":"New Inline Comment","Add new inline comment on selected source text.":"Add new inline comment on selected source text.","Suggest Edit":"Suggest Edit","Discard Edit":"Discard Edit"}}],"workflow":[],"lightbox-attachments":[],"aphront-form-disable-on-submit":[],"toggle-class":[],"phabricator-gesture":[],"device":[],"high-security-warning":[{"show":false,"uri":"\/auth\/session\/downgrade\/","message":"Your session is in high security mode. When you finish using it, click here to leave."}],"phabricator-keyboard-shortcuts":[{"helpURI":"\/help\/keyboardshortcut\/","searchID":"UQ0_133","pht":{"\/":"Give keyboard focus to the search box.","?":"Show keyboard shortcut help for the current page."}}],"phabricator-search-typeahead":[{"id":"UQ0_134","input":"UQ0_133","button":"UQ0_135","selectorID":"UQ0_136","applicationID":"UQ0_137","defaultApplicationIcon":"fa-dot-circle-o","appScope":"application","src":"\/typeahead\/class\/PhabricatorSearchDatasource\/","limit":10,"placeholder":"Search","scopeUpdateURI":"\/settings\/adjust\/?key=search-scope"}],"quicksand-blacklist":[{"patterns":["\/phame\/live\/.*","\/conpherence\/.*","\/Z\\d+","\/file\/(data|download)\/.*","\/phortune\/.*","\/auth\/.*"]}]}' data-javelin-init-kind="behaviors"></data></body></html>