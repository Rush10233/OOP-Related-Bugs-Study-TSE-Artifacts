{
      if (!TREE_PUBLIC (decl))
        {

          if ((DECL_MAYBE_IN_CHARGE_DESTRUCTOR_P (decl)
    	   || DECL_MAYBE_IN_CHARGE_CONSTRUCTOR_P (decl))

    	  && DECL_CHAIN (decl)
    	  && DECL_CLONED_FUNCTION (DECL_CHAIN (decl)))
    	return vague_linkage_p (DECL_CHAIN (decl));

    	    }
    
    	  /* Local classes in templates have CLASSTYPE_USE_TEMPLATE set,

    	}
          else if (VAR_P (decl) && DECL_TINFO_P (decl)
    	       && flag_visibility_ms_compat)

{
      if (!TREE_PUBLIC (decl))
        {

          if ((DECL_MAYBE_IN_CHARGE_DESTRUCTOR_P (decl)
    	   || DECL_MAYBE_IN_CHARGE_CONSTRUCTOR_P (decl))

    	  && DECL_CHAIN (decl)
    	  && DECL_CLONED_FUNCTION_P (DECL_CHAIN (decl)))
    	return vague_linkage_p (DECL_CHAIN (decl));

    	    }
    
    	  /* Local classes in templates have CLASSTYPE_USE_TEMPLATE set,

    	}
          else if (VAR_P (decl) && DECL_TINFO_P (decl)
    	       && flag_visibility_ms_compat)

{
      if (!TREE_PUBLIC (decl))
        {

          if ((DECL_MAYBE_IN_CHARGE_DESTRUCTOR_P (decl)
    	   || DECL_MAYBE_IN_CHARGE_CONSTRUCTOR_P (decl))

    	  && DECL_CHAIN (decl)
    	  && DECL_CLONED_FUNCTION_P (DECL_CHAIN (decl)))
    	return vague_linkage_p (DECL_CHAIN (decl));

    	    }
    
    	  /* Local classes in templates have CLASSTYPE_USE_TEMPLATE set,

    	}
          else if (VAR_P (decl) && DECL_TINFO_P (decl)
    	       && flag_visibility_ms_compat)

